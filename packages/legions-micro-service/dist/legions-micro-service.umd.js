!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("legions-import-html-entry"),require("single-spa"),require("lodash/noop"),require("lodash/isFunction"),require("lodash/snakeCase"),require("lodash/forEach"),require("lodash/concat"),require("lodash/mergeWith"),require("lodash/cloneDeep"),require("reflect-metadata")):"function"==typeof define&&define.amd?define(["exports","legions-import-html-entry","single-spa","lodash/noop","lodash/isFunction","lodash/snakeCase","lodash/forEach","lodash/concat","lodash/mergeWith","lodash/cloneDeep","reflect-metadata"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).legionsMicroService={},e.legionsImportHtmlEntry,e.singleSpa,e.noop,e.isFunction,e.snakeCase,e.forEach,e.concat,e.mergeWith,e.cloneDeep)}(this,function(e,ae,h,n,t,r,o,i,a,u){"use strict";function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=c(n),s=c(t),l=c(r),p=c(o),ue=c(i),ce=c(a),m=c(u),se=function(){return(se=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function le(e,n){var t={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t}function de(e,a,u,c){return new(u=u||Promise)(function(t,n){function r(e){try{i(c.next(e))}catch(e){n(e)}}function o(e){try{i(c.throw(e))}catch(e){n(e)}}function i(e){var n;e.done?t(e.value):((n=e.value)instanceof u?n:new u(function(e){e(n)})).then(r,o)}i((c=c.apply(e,a||[])).next())})}function pe(t,r){var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:n(0),throw:n(1),return:n(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}function v(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),a=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}(arguments[n]));return e}var y=[],w={},g=[],b=!1,E="normal",x=(S.getStore=function(){return{apps:y,scriptResources:w,currentEnvironment:E,externalOnloadScript:g}},S.prototype.getApps=function(){return{apps:y,scriptResources:w,currentEnvironment:E,externalOnloadScript:g}},S.prototype.isRegister=function(n){var e=y.filter(function(e){return e.name===n.name});return 0<e.length?e:null},S.prototype.register=function(e){var n;Array.isArray(e)&&(n=e.filter(function(n){return!y.some(function(e){return e.name===n.name})}),y=v(y,n))},S.prototype.addRender=function(n){y.forEach(function(e){e.name!==n.name||e.render||(e.render=n.render)})},S.prototype.mounted=function(u){var e,n,t=this,c=this;b||((n=document.createElement("div")).innerHTML='<style>.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px;} a.btn {display: inline-block;background-color: #0885f2;color: #ffffff;line-height:16px;border: 1px solid #0885f2;outline: none;cursor: pointer;border-radius: 2px;cursor:pointer;} a.btn:hover {color:#fff;}</style> <div  id = "updateBrowseBoxVersion" style = "position: fixed;top: 0;left:0px;width: 100%;color: red;border-bottom: 1px solid #b1b4b9;padding-left: 10px;" class="update-browse-tips" > 您的浏览器版本过低，可能无法正常使用部分功能，请升级。推荐使用谷歌，火狐浏览器<a class="btn btn-update" target="_blank" href="http://browsehappy.osfipin.com/">立即升级</a></div > ',b="WebSocket"in window&&2===window.WebSocket.CLOSING&&!(1<=window.navigator.userAgent.indexOf("MSIE"))||(null===document.getElementById("updateBrowseBoxVersion")&&(void 0===(e=document.getElementsByTagName("body")[0])?setTimeout(f,10):e.insertBefore(n,e.firstChild)),!1));var s,l,r,o,i,d=u.entry,a=u.appId,p=u.container||"reactSandboxWrap";a?d?(s=u.styleId,(l=function(){var e=t.isRegister(u);e?u=e[0]:y=v(y,[u])}).call(c),r=document.getElementById(p)||document.getElementsByClassName(p),o=document.createElement("div"),i=document.createElement("div"),o.id=s,i.id=a,u.loading&&(i.innerHTML='<div class="preloader"><div class="cs-loader"><div class="cs-loader-inner"><label> ●</label><label> ●</label><label> ●</label><label> ●</label><label> ●</label><label> ●</label></div></div></div><style type="text/css">.reactSandboxWrap{position:relative;min-height: 100%;}.tab-right{padding: 0!important;}.preloader{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:#1890ff;z-index:9999;transition:opacity .65s}.preloader-hidden-add{opacity:1;display:block}.preloader-hidden-add-active{opacity:0}.preloader-hidden{display:none}.cs-loader{position:absolute;top:0;left:0;height:100%;width:100%}.cs-loader-inner{transform:translateY(-50%);top:50%;position:absolute;width:100%;color:#fff;text-align:center}.cs-loader-inner label{font-size:20px;opacity:0;display:inline-block}@keyframes lol{0%{opacity:0;transform:translateX(-300px)}33%{opacity:1;transform:translateX(0)}66%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(300px)}}.cs-loader-inner label:nth-child(6){animation:lol 3s infinite ease-in-out}.cs-loader-inner label:nth-child(5){animation:lol 3s .1s infinite ease-in-out}.cs-loader-inner label:nth-child(4){animation:lol 3s .2s infinite ease-in-out}.cs-loader-inner label:nth-child(3){animation:lol 3s .3s infinite ease-in-out}.cs-loader-inner label:nth-child(2){animation:lol 3s .4s infinite ease-in-out}.cs-loader-inner label:nth-child(1){animation:lol 3s .5s infinite ease-in-out}</style>'),r?r instanceof HTMLCollection?r[0]?(document.getElementById(o.id)||r[0].appendChild(o),document.getElementById(i.id)||r[0].appendChild(i)):(document.getElementById(o.id)||document.body.appendChild(o),document.getElementById(i.id)||document.body.appendChild(i)):(document.getElementById(o.id)||r.appendChild(o),document.getElementById(i.id)||r.appendChild(i)):(document.getElementById(o.id)||document.body.appendChild(o),document.getElementById(i.id)||document.body.appendChild(i)),function(){if(w&&w.hasOwnProperty(d))return E="sandbox",u.render&&u.render(),void 0===(e=w[d].styles)&&(e=[]),void e.forEach(function(e){var n=document.createElement("style"),t=document.getElementById(s);n.innerHTML=e,t.appendChild(n)});var e;ae.importHTML(d,c.importHTMLOptions||{}).then(function(i){i.getExternalScripts().then(function(e){var n,t,r,o,a;i.getScripts&&(n=i.getScripts(),t=[],r=n.scripts,o=[],e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(e){o.push({key:e.scripts,code:e.scriptsText})}),n.excludeFiles.hasOwnProperty(d)&&n.excludeFiles[d].forEach(function(n){o.forEach(function(e){-1<e.key.indexOf(n)&&t.push({url:e.key,code:e.code})})}),w[d]={scripts:n.scripts[d],scriptCache:o,excludeSandboxFiles:t,sandbox:[],styles:[]},r.hasOwnProperty(d)&&r[d].forEach(function(n){t.forEach(function(e){e&&e.url.indexOf(n)<0&&w[d].sandbox.push(n)})}),a=[],t.forEach(function(i){function n(){var e=new Promise(function(n,e){var t,r,o;void 0===(t=i.url)&&(t=""),void 0===(r=function(){w[d].scriptCache.forEach(function(e){e.key===i.url&&(g.push({url:i.url,code:e.code}),n(g))})})&&(r=function(){}),t&&((o=document.createElement("script")).src=t,document.body.appendChild(o),o.onload=o.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||r&&r()})});a.push(e)}g.length?g.forEach(function(e){e.url.indexOf(i.url)<0&&e.code!==i.code&&n()}):n()}),Promise.all(a).then(function(e){i.execScripts().then(function(){l.call(c),E="sandbox",u.render&&u.render()}),i.getExternalStyleSheets().then(function(e){w[d].styles.length&&(w[d].styles=[]),e.forEach(function(e){w[d].styles.push(e);var n=document.createElement("style"),t=document.getElementById(s);n.innerHTML=e,t.appendChild(n)})})}))})})}.call(c)):console.error("请先设置应用入口地址entry信息"):console.error("请先设置应用appId信息")},S);function S(e){var n;this.importHTMLOptions={excludeFiles:[],isMerge:!1},e&&(n=e,"[object Object]"===Object.prototype.toString.call(n))&&(this.importHTMLOptions={excludeFiles:e.excludeFiles||[],isMerge:e.isMerge||!1})}var O=[],M={},_=[],fe=(T.getStore=function(){return{apps:O,scriptResources:M,externalOnloadScript:_}},T.prototype.getApps=function(){return{apps:O,scriptResources:M,externalOnloadScript:_}},T.prototype.isRegister=function(n){var e=O.filter(function(e){return e.name===n.name});return 0<e.length?e:null},T.prototype.register=function(e){var n;Array.isArray(e)&&(n=e.filter(function(n){return!O.some(function(e){return e.name===n.name})}),O=v(O,n))},T.prototype.bootstrap=function(e,i){var n=this,a=e.entry,t=function(){i.getExternalScripts().then(function(e){var n,t,r,o;i.getScripts&&(n=i.getScripts(),t=[],r=n.scripts,o=[],e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(e){o.push({key:e.scripts,code:e.scriptsText})}),n.excludeFiles.hasOwnProperty(a)&&n.excludeFiles[a].forEach(function(n){o.forEach(function(e){-1<e.key.indexOf(n)&&t.push({url:e.key,code:e.code})})}),M[a]={scripts:n.scripts[a],scriptCache:o,excludeSandboxFiles:t,sandbox:[],styles:[],externalOnloadScriptPromise:[]},r.hasOwnProperty(a)&&r[a].forEach(function(n){t.forEach(function(e){e&&e.url.indexOf(n)<0&&M[a].sandbox.push(n)})}))})};(function(){n.isRegister(e)||(O=v(O,[e]),t())}).call(this)},T);function T(){}var P=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},L=!!navigator.connection&&(navigator.connection.saveData||"wifi"!==navigator.connection.type&&"ethernet"!==navigator.connection.type&&/(2|3)g/.test(navigator.connection.effectiveType));function C(o,i){var e=this;navigator.onLine&&!L&&P(function(){return de(e,void 0,void 0,function(){var n,t,r;return pe(this,function(e){switch(e.label){case 0:return[4,ae.importHTML(o,i)];case 1:return n=e.sent(),t=n.getExternalScripts,r=n.getExternalStyleSheets,P(r),P(t),[2]}})})})}function A(r,o){window.addEventListener("single-spa:first-mount",function e(){var n,t=r.filter(function(e){return h.getAppStatus(e.name)===h.NOT_LOADED});"production"!==process.env.NODE_ENV&&(n=h.getMountedApps(),console.log("[legions] prefetch starting after "+n+" mounted...",t)),t.forEach(function(e){return C(e.entry,o)}),window.removeEventListener("single-spa:first-mount",e)})}function N(e,n){"production"!==process.env.NODE_ENV&&console.log("[legions] prefetch starting for apps...",e),e.forEach(function(e){return C(e.entry,n)})}function he(e){return Array.isArray(e)?e:[e]}function me(e){return"__legions_microapp_wrapper_for_"+l.default(e)+"__"}var I,k,ve=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ye="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures;function we(e){ye&&performance.mark(e)}function ge(e){return"string"==typeof e?document.querySelector(e):e}function be(e){var n=null!=e?e:{},t=n.bootstrap,r=n.mount,o=n.unmount;return s.default(t)&&s.default(r)&&s.default(o)}(k=I=I||{}).Proxy="Proxy",k.Snapshot="Snapshot",k.LegacyProxy="LegacyProxy";var H="function"==typeof document.all&&void 0===document.all?function(e){return"function"==typeof e&&void 0!==e}:function(e){return"function"==typeof e},R=new WeakMap;var B,D,j=new WeakMap;(D=B=B||{})[D.STYLE=1]="STYLE",D[D.MEDIA=4]="MEDIA",D[D.SUPPORTS=12]="SUPPORTS",D[D.IMPORT=3]="IMPORT",D[D.FONT_FACE=5]="FONT_FACE",D[D.PAGE=6]="PAGE",D[D.KEYFRAMES=7]="KEYFRAMES",D[D.KEYFRAME=8]="KEYFRAME";function G(e){return[].slice.call(e,0)}var W,F=HTMLBodyElement.prototype.appendChild,U="data-legions",Y=(V.prototype.process=function(u,c){var e,s=this;if(void 0===c&&(c=""),""!==u.textContent){var n=document.createTextNode(u.textContent||"");this.swapNode.appendChild(n);var t=this.swapNode.sheet,r=G(null!==(e=null==t?void 0:t.cssRules)&&void 0!==e?e:[]),o=this.rewrite(r,c);return u.textContent=o,void this.swapNode.removeChild(n)}new MutationObserver(function(e){for(var n,t=0;t<e.length;t+=1){var r,o,i,a=e[t];if(V.ModifiedTag in u)return;"childList"===a.type&&(r=u.sheet,o=G(null!==(n=null==r?void 0:r.cssRules)&&void 0!==n?n:[]),i=s.rewrite(o,c),u.textContent=i,u[V.ModifiedTag]=!0)}}).observe(u,{childList:!0})},V.prototype.rewrite=function(e,n){var t=this;void 0===n&&(n="");var r="";return e.forEach(function(e){switch(e.type){case B.STYLE:r+=t.ruleStyle(e,n);break;case B.MEDIA:r+=t.ruleMedia(e,n);break;case B.SUPPORTS:r+=t.ruleSupport(e,n);break;default:r+=""+e.cssText}}),r},V.prototype.ruleStyle=function(e,r){var o=/((?:[^\w\-.#]|^)(body|html|:root))/gm,n=/(html[^\w{[]+)/gm,t=e.selectorText.trim(),i=e.cssText;return"html"===t||"body"===t||":root"===t?i.replace(o,r):(n.test(e.selectorText)&&(/(html[^\w{]+)(\+|~)/gm.test(e.selectorText)||(i=i.replace(n,""))),i=i.replace(/^[\s\S]+{/,function(e){return e.replace(/(^|,\n?)([^,]+)/g,function(e,n,t){return o.test(e)?e.replace(o,function(e){return e&&[",","("].includes(e[0])?""+e[0]+r:r}):""+n+r+" "+t.replace(/^ */,"")})}))},V.prototype.ruleMedia=function(e,n){var t=this.rewrite(G(e.cssRules),n);return"@media "+e.conditionText+" {"+t+"}"},V.prototype.ruleSupport=function(e,n){var t=this.rewrite(G(e.cssRules),n);return"@supports "+e.conditionText+" {"+t+"}"},V.ModifiedTag="Symbol(style-modified-qiankun)",V);function V(){var e=document.createElement("style");F.call(document.body,e),this.swapNode=e,this.sheet=e.sheet,this.sheet.disabled=!0}var q=function(e,n,t){var r,o;W=W||new Y,"LINK"===n.tagName&&console.warn("Feature: sandbox.experimentalStyleIsolation is not support for link element yet."),!e||(r=(e.tagName||"").toLowerCase())&&"STYLE"===n.tagName&&(o=r+"["+U+'="'+t+'"]',W.process(n,o))},K=window.__INJECTED_PUBLIC_PATH_BY_LEGIONS__;function Ee(e,n){return ce.default({},{beforeLoad:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return t.__POWERED_BY_LEGIONS__=!0,[2]})})},beforeMount:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return t.__POWERED_BY_LEGIONS__=!0,[2]})})},beforeUnmount:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return delete t.__POWERED_BY_LEGIONS__,[2]})})}},function(n,t){void 0===t&&(t="/");var r=!1;return{beforeLoad:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=t,[2]})})},beforeMount:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return r&&(n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=t),[2]})})},beforeUnmount:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return void 0===K?delete n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__:n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=K,r=!0,[2]})})}}}(t=e,n),function(e,n){return ue.default(null!=e?e:[],null!=n?n:[])});var t}var z={},J={},X={};function $(t,r,o){Object.keys(J).forEach(function(n){var e;"function"==typeof J[n]&&(!o||(e=X[o.scope])&&Array.isArray(e)&&e.forEach(function(e){e===n&&J[n](m.default(t),m.default(r),o)}))})}function xe(r,i){return{onGlobalStateChange:function(e,n){var t;"function"==typeof e?(J[r]&&console.warn("[legions] '"+r+"' global listener already exists before this, new listener will overwrite it."),J[r]=e,n&&Array.isArray(n.eventScopes)&&n.eventScopes.forEach(function(e){(X[e.name]||(X[e.name]=[])).push(r)}),t=m.default(z),n&&n.fireImmediately&&e(t,t)):console.error("[legions] callback must be function!")},setGlobalState:function(r,e){if(void 0===r&&(r={}),r===z)return console.warn("[legions] state has not changed！"),!1;var o=[],n=m.default(z);return z=m.default(Object.keys(r).reduce(function(e,n){var t;return i||e.hasOwnProperty(n)?(o.push(n),Object.assign(e,((t={})[n]=r[n],t))):(console.warn("[legions] '"+n+"' not declared when init state！"),e)},z)),0===o.length?(console.warn("[legions] state has not changed！"),!1):($(z,n,e),!0)},offGlobalStateChange:function(){return delete J[r],!0}}}var Z=new WeakMap,Q=new WeakMap;function ee(e,n){if(!H(n)||function(e){if(R.has(e))return R.get(e);var n=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return R.set(e,n),n}(n)||function(e){if(j.has(e))return j.get(e);var n=e.prototype&&e.prototype.constructor===e&&1<Object.getOwnPropertyNames(e.prototype).length||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return j.set(e,n),n}(n))return n;var t=Q.get(n);if(t)return t;var r,o=n.bind(e);for(r in n)o[r]=n[r];return"prototype"in n&&(o.prototype=n.prototype),Q.set(n,o),o}var ne=0;var te={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,eval:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0},re=Object.defineProperty,oe=v(["System","__cjsWrapper"],"development"===process.env.NODE_ENV?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"]:[]);var ie=(Se.prototype.active=function(){this.sandboxRunning||ne++,this.sandboxRunning=!0},Se.prototype.inactive=function(){var n=this;"production"!==process.env.NODE_ENV&&console.info("[legions:sandbox] "+this.name+" modified global properties restore...",v(this.updatedValueSet.keys())),0==--ne&&oe.forEach(function(e){n.sandbox.hasOwnProperty(e)&&delete window[e]}),this.sandboxRunning=!1},Se.prototype.createProxySandbox=function(){function r(e){return n.hasOwnProperty(e)||s.hasOwnProperty(e)}var o,i,a,u=this.updatedValueSet,c=this,s=window,e=(o=s,i=new Map,a={},Object.getOwnPropertyNames(o).filter(function(e){var n=Object.getOwnPropertyDescriptor(o,e);return!(null!=n&&n.configurable)}).forEach(function(e){var n,t=Object.getOwnPropertyDescriptor(o,e);t&&(n=Object.prototype.hasOwnProperty.call(t,"get"),"top"!==e&&"parent"!==e&&"self"!==e&&"window"!==e&&("test"!==process.env.NODE_ENV||"mockTop"!==e&&"mockSafariTop"!==e)||(t.configurable=!0,n||(t.writable=!0)),n&&i.set(e,!0),re(a,e,Object.freeze(t)))}),{fakeWindow:a,propertiesWithGetter:i}),n=e.fakeWindow,l=e.propertiesWithGetter,d=new Map,p=new window.Proxy(n,{set:function(e,n,t){return c.sandboxRunning&&(-1!==oe.indexOf(n)&&(s[n]=t),e[n]=t,u.add(n)),!0},get:function(e,n){if(n===Symbol.unscopables)return te;if("window"===n||"self"===n)return p;if("top"===n||"parent"===n)return p;if("hasOwnProperty"===n)return r;if("document"===n)return Z.set(document,p),Promise.resolve().then(function(){return Z.delete(document)}),document;var t=!l.has(n)&&e[n]||s[n];return ee(s,t)},has:function(e,n){return n in te||n in e||n in s},getOwnPropertyDescriptor:function(e,n){if(e.hasOwnProperty(n)){var t=Object.getOwnPropertyDescriptor(e,n);return d.set(n,"target"),t}if(s.hasOwnProperty(n)){t=Object.getOwnPropertyDescriptor(s,n);return d.set(n,"rawWindow"),t&&!t.configurable&&(t.configurable=!0),t}},ownKeys:function(e){return Reflect.ownKeys(s).concat(Reflect.ownKeys(e)).filter(function(e){return!(e in this)&&(this[e]=!0)},Object.create(null))},defineProperty:function(e,n,t){return"rawWindow"!==d.get(n)?Reflect.defineProperty(e,n,t):Reflect.defineProperty(s,n,t)},deleteProperty:function(e,n){return e.hasOwnProperty(n)&&(delete e[n],u.delete(n)),!0}});this.sandbox=p},Se.prototype.getSandbox=function(){return this.sandbox},Se);function Se(e){void 0===e&&(e={name:""}),this.eventListeners={},this.timeoutIds=[],this.intervalIds=[],this.updatedValueSet=new Set,this.name="",this.type=I.Proxy,this.sandboxRunning=!0,window.Proxy||console.warn("proxy sandbox is not support by current browser"),this.sandbox=null,this.name=e.name,this.createProxySandbox()}function Oe(e,n){for(var t in e)e.hasOwnProperty(t)&&n(t)}var Me=(_e.prototype.active=function(){var n=this;this.windowSnapshot={},Oe(window,function(e){n.windowSnapshot[e]=window[e]}),Object.keys(this.modifyPropsMap).forEach(function(e){window[e]=n.modifyPropsMap[e]}),this.sandboxRunning=!0},_e.prototype.inactive=function(){var n=this;this.modifyPropsMap={},Oe(window,function(e){window[e]!==n.windowSnapshot[e]&&(n.modifyPropsMap[e]=window[e],window[e]=n.windowSnapshot[e])}),"production"!==process.env.NODE_ENV&&console.info("[legions:sandbox] "+this.name+" origin window restore...",Object.keys(this.modifyPropsMap)),this.sandboxRunning=!1},_e);function _e(e){this.sandboxRunning=!0,this.modifyPropsMap={},this.name=e,this.sandbox=window,this.type=I.Snapshot}var Te=HTMLHeadElement.prototype.appendChild,Pe=HTMLHeadElement.prototype.removeChild,Le=HTMLBodyElement.prototype.appendChild,Ce=HTMLBodyElement.prototype.removeChild,Ae=HTMLHeadElement.prototype.insertBefore,Ne=HTMLElement.prototype.removeChild,Ie="SCRIPT",ke="LINK",He="STYLE";function Re(e){return(null==e?void 0:e.toUpperCase())===ke||(null==e?void 0:e.toUpperCase())===He||(null==e?void 0:e.toUpperCase())===Ie}function Be(e){var n,t;return!e.textContent&&(null!==(n=e.sheet)&&void 0!==n&&n.cssRules.length||null!==(t=Ye(e))&&void 0!==t&&t.length)}function De(e,n){return Object.defineProperties(e,{srcElement:{get:n},target:{get:n}}),e}function je(r,o,e){void 0===e&&(e=ae.fetch);var i=document.createElement("style"),n=r.href;return e(i.dataset.qiankunHref=n).then(function(e){return e.text()}).then(function(e){var n,t;i.appendChild(document.createTextNode(e)),o(i),n=r,t=De(new CustomEvent("load"),function(){return n}),s.default(n.onload)?n.onload(t):n.dispatchEvent(t)}).catch(function(){return e=r,n=De(new CustomEvent("error"),function(){return e}),void(s.default(e.onerror)?e.onerror(n):e.dispatchEvent(n));var e,n}),i}var Ge=new WeakMap,We=new WeakMap,Fe=new WeakMap;function Ue(e){e.forEach(function(e){e instanceof HTMLStyleElement&&Be(e)&&e.sheet&&Ge.set(e,e.sheet.cssRules)})}function Ye(e){return Ge.get(e)}function Ve(S){return function(e,n){var t,r=e,o=S.rawDOMAppendOrInsertBefore,i=S.isInvokedByMicroApp,a=S.containerConfigGetter;if(!Re(r.tagName)||!i(r))return o.call(this,r,n);if(r.tagName){var u=a(r),c=u.appName,s=u.appWrapperGetter,l=u.proxy,d=(u.strictGlobal,u.dynamicStyleSheetElements),p=u.scopedCSS,f=u.excludeAssetFilter;switch(r.tagName){case ke:case He:var h=e,m=h.href;if(f&&m&&f(m))return o.call(this,r,n);var v=s();p&&((null===(t=r.tagName)||void 0===t?void 0:t.toUpperCase())===ke&&"stylesheet"===r.rel&&r.href?(h=je(r,function(e){return q(v,e,c)},ae.fetch),Fe.set(r,h)):q(v,h,c)),d.push(h);var y=v.contains(n)?n:null;return o.call(v,h,y);case Ie:var w=r.src,g=r.text;if(f&&w&&f(w))return o.call(this,r,n);var b=s(),y=b.contains(n)?n:null;if(w){ae.execScripts(null,[w],l);var E=document.createComment("dynamic script "+w+" replaced by legions");return We.set(r,E),o.call(b,E,y)}ae.execScripts(null,["<script>"+g+"<\/script>"],l);var x=document.createComment("dynamic inline script replaced by legions");return We.set(r,x),o.call(b,x,y)}}return o.call(this,r,n)}}function qe(o,i){return function(e){var n=e.tagName;if(!Re(n))return o.call(this,e);try{var t=void 0;switch(n){case ke:t=Fe.get(e)||e;break;case Ie:t=We.get(e)||e;break;default:t=e}var r=i(e)();if(r.contains(t))return Ne.call(r,t)}catch(e){console.warn(e)}return o.call(this,e)}}function Ke(e,n){return HTMLHeadElement.prototype.appendChild===Te&&HTMLBodyElement.prototype.appendChild===Le&&HTMLHeadElement.prototype.insertBefore===Ae&&(HTMLHeadElement.prototype.appendChild=Ve({rawDOMAppendOrInsertBefore:Te,containerConfigGetter:n,isInvokedByMicroApp:e}),HTMLBodyElement.prototype.appendChild=Ve({rawDOMAppendOrInsertBefore:Le,containerConfigGetter:n,isInvokedByMicroApp:e}),HTMLHeadElement.prototype.insertBefore=Ve({rawDOMAppendOrInsertBefore:Ae,containerConfigGetter:n,isInvokedByMicroApp:e})),HTMLHeadElement.prototype.removeChild===Pe&&HTMLBodyElement.prototype.removeChild===Ce&&(HTMLHeadElement.prototype.removeChild=qe(Pe,function(e){return n(e).appWrapperGetter}),HTMLBodyElement.prototype.removeChild=qe(Ce,function(e){return n(e).appWrapperGetter})),function(){HTMLHeadElement.prototype.appendChild=Te,HTMLHeadElement.prototype.removeChild=Pe,HTMLBodyElement.prototype.appendChild=Le,HTMLBodyElement.prototype.removeChild=Ce,HTMLHeadElement.prototype.insertBefore=Ae}}function ze(e,o){e.forEach(function(e){if(o(e),e instanceof HTMLStyleElement&&Be(e)){var n=Ye(e);if(n)for(var t=0;t<n.length;t++){var r=n[t];e.sheet.insertRule(r.cssText)}}})}var Je=0,Xe=0;function $e(n,t,e,r,o,i){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=[],u=Ke(function(){return h.checkActivityFunctions(window.location).some(function(e){return e===n})},function(){return{appName:n,appWrapperGetter:t,proxy:e,strictGlobal:!1,scopedCSS:o,dynamicStyleSheetElements:a,excludeAssetFilter:i}});return r||Je++,r&&Xe++,function(){return r||0===Je||Je--,r&&Xe--,0===Xe&&0===Je&&u(),Ue(a),function(){ze(a,function(e){return document.head.appendChild.call(t(),e)}),r&&(a=[])}}}var Ze=Document.prototype.createElement,Qe=new WeakMap,en=new WeakMap;var nn=0,tn=0;function rn(e,n,t,r,o,i){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=Qe.get(t);a||(a={appName:e,proxy:t,appWrapperGetter:n,dynamicStyleSheetElements:[],strictGlobal:!0,excludeAssetFilter:i,scopedCSS:o},Qe.set(t,a));var u=a.dynamicStyleSheetElements,c=(Document.prototype.createElement===Ze&&(Document.prototype.createElement=function(e,n){var t,r,o=Ze.call(this,e,n);return Re(e)&&(!(t=Z.get(this))||(r=Qe.get(t))&&en.set(o,r)),o}),function(){Document.prototype.createElement=Ze}),s=Ke(function(e){return en.has(e)},function(e){return en.get(e)});return r||nn++,r&&tn++,function(){return r||0===nn||nn--,r&&tn--,0===tn&&0===nn&&(s(),c()),Qe.delete(t),Ue(u),function(){ze(u,function(e){return Te.call(n(),e)})}}}function on(){var r=window.setInterval.bind(window),o=window.setTimeout.bind(window),i=[],a=[];return window.setInterval=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=r.apply(void 0,v(e));return a.push(t),t},window.setTimeout=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=o.apply(void 0,v(e));return i.push(t),t},function(){var e=this;return window.setInterval=r,window.setTimeout=o,i.forEach(function(n){return de(e,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,function(n){return de(this,void 0,void 0,function(){return pe(this,function(e){return[2,new Promise(function(e){return setTimeout(e,n)})]})})}(500)];case 1:return e.sent(),window.clearTimeout(n),[2]}})})}),a.forEach(function(e){window.clearInterval(e)}),d.default}}function an(e,n,t,r,o){var i,a,u=[on,function(){return o=new Map,i=window.addEventListener,a=window.removeEventListener,window.addEventListener=function(e,n,t){var r=o.get(e)||[];return o.set(e,v(r,[n])),i.call(window,e,n,t)},window.removeEventListener=function(e,n,t){var r=o.get(e);return r&&r.length&&-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1),a.call(window,e,n,t)},function(){return o.forEach(function(e,n){return e.forEach(function(e){return window.removeEventListener(n,e)})}),window.addEventListener=i.bind(window),window.removeEventListener=a.bind(window),d.default};var o,i,a},function(){return t=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return d.default},r=[],o=[],window.g_history&&s.default(window.g_history.listen)&&(t=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(e){r.push(e);var n=t(e);return o.push(n),function(){n(),o.splice(o.indexOf(n),1),r.splice(r.indexOf(e),1)}}),function(){var e=d.default;return r.length&&(e=function(){r.forEach(function(e){return window.g_history.listen(e)})}),o.forEach(function(e){return e()}),window.g_history&&s.default(window.g_history.listen)&&(window.g_history.listen=t),e};var t,r,o}];return null===(a=((i={})[I.Proxy]=v(u,[function(){return rn(e,n,t.sandbox,!0,r,o)}]),i[I.Snapshot]=v(u,[function(){return $e(e,n,t.sandbox,!0,r,o)}]),i)[t.type])||void 0===a?void 0:a.map(function(e){return e()})}function un(r,o,i,a){var e,n,t,u,c,s,l,d=window.Proxy?new ie({name:r}):new Me(r),p=[],f=[],h=(e=r,n=o,t=d,u=i,c=a,null===(l=((s={})[I.Proxy]=[function(){return rn(e,n,t.sandbox,!1,u,c)}],s[I.Snapshot]=[function(){return $e(e,n,t.sandbox,!1,u,c)}],s)[t.type])||void 0===l?void 0:l.map(function(e){return e()}));return{proxy:d.sandbox,mount:function(){return de(this,void 0,void 0,function(){var n,t;return pe(this,function(e){return n=f.slice(0,h.length),t=f.slice(h.length),n.length&&n.forEach(function(e){return e()}),d.active(),window.Proxy&&p.push.apply(p,v(an(r,o,d,i,a))),t.length&&t.forEach(function(e){return e()}),f=[],[2]})})},unmount:function(){return de(this,void 0,void 0,function(){return pe(this,function(e){return f=v(h,p).map(function(e){return e()}),d.inactive(),[2]})})}}}function cn(e,n){if(!e){if(n)throw new Error(n);throw new Error("[legions] element not existed!")}}function sn(e,t,r){return void 0===r&&(r=window),e.length?e.reduce(function(e,n){return e.then(function(){return n(t,r)})},Promise.resolve()):Promise.resolve()}function ln(t,r,o,i,a,u){return function(){if(o){if(i)throw new Error("[legions]: strictStyleIsolation can not be used with legacy render!");if(a)throw new Error("[legions]: experimentalStyleIsolation can not be used with legacy render!");var e=document.getElementById(me(r));return cn(e,"[legions] Wrapper element for "+t+" with instance "+r+" is not existed!"),e}var n=u();return cn(n,"[legions] Wrapper element for "+t+" with instance "+r+" is not existed!"),i?n.shadowRoot:n}}var dn=HTMLElement.prototype.appendChild,pn=HTMLElement.prototype.removeChild;var fn,hn=document.head.attachShadow||document.head.createShadowRoot;function mn(e,n,t,r){var o=document.createElement("div");o.innerHTML=e;var i,a,u=o.firstChild;return n&&(hn?(i=u.innerHTML,u.innerHTML="",(u.attachShadow?u.attachShadow({mode:"open"}):u.createShadowRoot()).innerHTML=i):console.warn("[legions]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!")),t&&(u.getAttribute(U)||u.setAttribute(U,r),a=u.querySelectorAll("style")||[],p.default(a,function(e){q(u,e,r)})),u}function vn(n,t){return de(this,void 0,void 0,function(){return pe(this,function(e){return[2,"function"==typeof n?n(t):!!n]})})}function yn(re,oe,ie){return void 0===oe&&(oe={}),de(this,void 0,void 0,function(){var o,i,s,l,d,p,f,h,m,v,y,w,g,b,E,x,S,O,M,_,T,P,L,C,A,N,I,k,H,R,B,D,j,G,W,F,U,Y,V,q,K,z,J,X,$,Z,Q,ee,ne,te=this;return pe(this,function(e){switch(e.label){case 0:return o=re.entry,i=re.name,s=i+"_"+ +new Date+"_"+Math.floor(1e3*Math.random()),l="[legions] App "+s+" Loading","production"!==process.env.NODE_ENV&&we(l),d=oe.singular,p=void 0!==d&&d,f=oe.sandbox,h=void 0===f||f,m=oe.excludeAssetFilter,v=le(oe,["singular","sandbox","excludeAssetFilter"]),[4,ae.importHTML(o,v)];case 1:return y=e.sent(),w=y.template,g=y.execScripts,b=y.assetPublicPath,E=y.getExternalScripts,x=y.getScripts,(new fe).bootstrap({container:re.container,entry:re.entry,name:i},{getExternalScripts:E,getScripts:x}),[4,vn(p,re)];case 2:return e.sent()?[4,fn&&fn.promise]:[3,4];case 3:e.sent(),e.label=4;case 4:return t=s,r=i,S=function(e){return'<div id="'+me(t)+'" data-name="'+r+'">'+e+"</div>"}(w),O="object"==typeof h&&!!h.strictStyleIsolation,M="object"==typeof(n=h)&&(!n.strictStyleIsolation&&!!n.experimentalStyleIsolation),_=mn(S,O,M,i),T="container"in re?re.container:void 0,P="render"in re?re.render:void 0,a=i,u=S,c=P,(L=function(e,n){var t=e.element,r=e.loading,o=e.container;if(c)return"production"!==process.env.NODE_ENV&&console.warn("[legions] Custom rendering function is deprecated, you can use the container element setting instead!"),c({loading:r,appContent:t?u:""});var i=ge(o);if("unmounted"!==n&&cn(i,function(){switch(n){case"loading":case"mounting":return"[legions] Target container with "+o+" not existed while "+a+" "+n+"!";case"mounted":return"[legions] Target container with "+o+" not existed after "+a+" "+n+"!";default:return"[legions] Target container with "+o+" not existed while "+a+" rendering!"}}()),i&&!i.contains(t)){for(;i.firstChild;)pn.call(i,i.firstChild);t&&dn.call(i,t)}})({element:_,loading:!0,container:T},"loading"),C=ln(i,s,!!P,O,M,function(){return _}),A=window,N=function(){return Promise.resolve()},I=function(){return Promise.resolve()},h&&(k=un(i,C,M,m),A=k.proxy,N=k.mount,I=k.unmount),H=ce.default({},Ee(A,b),ie,function(e,n){return ue.default(null!=e?e:[],null!=n?n:[])}),R=H.beforeUnmount,B=void 0===R?[]:R,D=H.afterUnmount,j=void 0===D?[]:D,G=H.afterMount,W=void 0===G?[]:G,F=H.beforeMount,U=void 0===F?[]:F,Y=H.beforeLoad,[4,sn(he(void 0===Y?[]:Y),re,A)];case 5:return e.sent(),[4,g(A)];case 6:return V=e.sent(),q=function(e,n,t){if(be(e))return e;"production"!==process.env.NODE_ENV&&console.warn("[legions] lifecycle not found from "+n+" entry exports, fallback to get from window['"+n+"']");var r=t[n];if(be(r))return r;throw new Error("[legions] You need to export lifecycle functions in "+n+" entry")}(V,i,A),K=q.bootstrap,z=q.mount,J=q.unmount,X=q.update,$=xe(s),Z=$.onGlobalStateChange,Q=$.setGlobalState,ee=$.offGlobalStateChange,ne=function(e){return _=e},[2,function(n){void 0===n&&(n=T);var t=_,r=ln(i,s,!!P,O,M,function(){return t}),e={name:s,bootstrap:K,mount:[function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return"production"!==process.env.NODE_ENV&&(performance.getEntriesByName(l,"mark").length||we(l)),[2]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,vn(p,re)];case 1:return e.sent()&&fn?[2,fn.promise]:[2,void 0]}})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return!(n!==T)&&t||(t=mn(S,O,M,i),ne(t)),L({element:t,loading:!0,container:n},"mounting"),[2]})})},N,function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,sn(he(U),re,A)]})})},function(n){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,z(se(se({},n),{container:r(),setGlobalState:Q,onGlobalStateChange:Z}))]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,L({element:t,loading:!1,container:n},"mounted")]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,sn(he(W),re,A)]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,vn(p,re)];case 1:return e.sent()&&(fn=new ve),[2]}})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){var n,t;return"production"!==process.env.NODE_ENV&&(n="[legions] App "+s+" Loading Consuming",t=l,ye&&performance.getEntriesByName(t,"mark").length&&(performance.measure(n,t),performance.clearMarks(t),performance.clearMeasures(n))),[2]})})}],unmount:[function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,sn(he(B),re,A)]})})},function(n){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,J(se(se({},n),{container:r()}))]})})},I,function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return[2,sn(he(j),re,A)]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){return L({element:null,loading:!1,container:n},"unmounted"),ee(s),ne(t=null),[2]})})},function(){return de(te,void 0,void 0,function(){return pe(this,function(e){switch(e.label){case 0:return[4,vn(p,re)];case 1:return e.sent()&&fn&&fn.resolve(),[2]}})})}]};return"function"==typeof X&&(e.update=X),e}]}var a,u,c,n,t,r})})}var wn={},gn=new ve,bn=[];var En=new Map;var xn="[legions] first app mounted";function Sn(n){window.addEventListener("single-spa:no-app-change",function e(){h.getMountedApps().length||h.navigateToUrl(n),window.removeEventListener("single-spa:no-app-change",e)})}"production"!==process.env.NODE_ENV&&console.time(xn),Object.defineProperty(e,"addErrorHandler",{enumerable:!0,get:function(){return h.addErrorHandler}}),Object.defineProperty(e,"getMountedApps",{enumerable:!0,get:function(){return h.getMountedApps}}),Object.defineProperty(e,"removeErrorHandler",{enumerable:!0,get:function(){return h.removeErrorHandler}}),e.MicroApps=x,e.MountedMicroApps=fe,e.addGlobalUncaughtErrorHandler=function(e){window.addEventListener("error",e),window.addEventListener("unhandledrejection",e)},e.getMicroAppStateActions=xe,e.initGlobalState=function(e){var n;return void 0===e&&(e={}),e===z?console.warn("[legions] state has not changed！"):(n=m.default(z),$(z=m.default(e),n)),xe("global-"+ +new Date,!0)},e.loadMicroApp=function(c,s,l){function d(e){var n=ge(e);if(n)return function(e,n){if(n.body.contains(e)){for(var t,r,o="",i=e;i!==n.documentElement;){for(t=0,r=i;r;)1===r.nodeType&&r.nodeName===i.nodeName&&(t+=1),r=r.previousSibling;o="*[name()='"+i.nodeName+"' and namespace-uri()='"+(null===i.namespaceURI?"":i.namespaceURI)+"']["+t+"]/"+o,i=i.parentNode}return o=(o="/*[name()='"+n.documentElement.nodeName+"' and namespace-uri()='"+(null===i.namespaceURI?"":i.namespaceURI)+"']/"+o).replace(/\/$/,"")}}(n,document)}function p(e){return se(se({},e),{bootstrap:function(){return Promise.resolve()}})}var e=this,n=c.props,f=c.name;return h.mountRootParcel(function(){return de(e,void 0,void 0,function(){var n,t,r,o,i,a,u;return pe(this,function(e){switch(e.label){case 0:return(n=(null!=s?s:wn).$$cacheLifecycleByAppName,t="container"in c?c.container:void 0)?n&&(o=En.get(f))?(r=p,[4,o]):[3,2]:[3,4];case 1:return[2,r.apply(void 0,[e.sent()(t)])];case 2:return(u=d(t))?(o=En.get(f+"-"+u))?(i=p,[4,o]):[3,4]:[3,4];case 3:return[2,i.apply(void 0,[e.sent()(t)])];case 4:return a=yn(c,null!=s?s:wn,l),t&&(n?En.set(f,a):(u=d(t))&&En.set(f+"-"+u,a)),[4,a];case 5:return[2,e.sent()(t)]}})})},se({domElement:document.createElement("div")},n))},e.prefetchApps=N,e.registerMicroApps=function(e,l){var o=this,n=e.filter(function(n){return!bn.some(function(e){return e.name===n.name})});bn=v(bn,n),n.forEach(function(e){var i=e.name,n=e.activeRule,t=e.loader,a=void 0===t?d.default:t,u=e.props,r=e.isMerge,c=void 0!==r&&r,s=le(e,["name","activeRule","loader","props","isMerge"]);h.registerApplication({name:i,app:function(){return de(o,void 0,void 0,function(){var n,t,r,o=this;return pe(this,function(e){switch(e.label){case 0:return a(!0),[4,gn.promise];case 1:return e.sent(),[4,yn(se({name:i,props:u},s),se(se({},wn),{isMerge:c}),l)];case 2:return n=e.sent()(),t=n.mount,r=le(n,["mount"]),[2,se({mount:v([function(){return de(o,void 0,void 0,function(){return pe(this,function(e){return[2,a(!0)]})})}],he(t),[function(){return de(o,void 0,void 0,function(){return pe(this,function(e){return[2,a(!1)]})})}])},r)]}})})},activeWhen:n,customProps:u})})},e.removeGlobalUncaughtErrorHandler=function(e){window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",e)},e.runAfterFirstMounted=function(n){window.addEventListener("single-spa:first-mount",function e(){"production"!==process.env.NODE_ENV&&console.timeEnd(xn),n(),window.removeEventListener("single-spa:first-mount",e)})},e.runDefaultMountEffects=function(e){console.warn("[legions] runDefaultMountEffects will be removed in next version, please use setDefaultMountApp instead"),Sn(e)},e.setDefaultMountApp=Sn,e.start=function(e){void 0===e&&(e={});var n=(wn=se({prefetch:!0,singular:!0,sandbox:!0},e)).prefetch,t=wn.sandbox,r=wn.singular,o=wn.urlRerouteOnly,i=le(wn,["prefetch","sandbox","singular","urlRerouteOnly"]);n&&function(e,n,t){var r;if(Array.isArray(n))A((r=n,e.filter(function(e){return r.includes(e.name)})),t);else switch(n){case!0:A(e,t);break;case"all":N(e,t)}}(bn,n,i),t&&(window.Proxy||(console.warn("[legions] Miss window.Proxy, proxySandbox will degenerate into snapshotSandbox"),wn.sandbox="object"==typeof t?se(se({},t),{loose:!0}):{loose:!0},r||console.warn("[legions] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy"))),h.start({urlRerouteOnly:o}),gn.resolve()},Object.defineProperty(e,"__esModule",{value:!0})});
