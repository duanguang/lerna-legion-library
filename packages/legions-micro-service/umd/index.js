!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("legions-import-html-entry"),require("single-spa"),require("lodash/noop"),require("lodash/isFunction"),require("lodash/snakeCase"),require("lodash/forEach"),require("lodash/concat"),require("lodash/mergeWith"),require("lodash/cloneDeep"),require("reflect-metadata")):"function"==typeof define&&define.amd?define(["exports","legions-import-html-entry","single-spa","lodash/noop","lodash/isFunction","lodash/snakeCase","lodash/forEach","lodash/concat","lodash/mergeWith","lodash/cloneDeep","reflect-metadata"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).legionsMicroService={},e.legionsImportHtmlEntry,e.singleSpa,e.noop,e.isFunction,e.snakeCase,e.forEach,e.concat,e.mergeWith,e.cloneDeep)}(this,function(e,q,h,n,t,r,o,i,a,u){"use strict";function c(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=c(n),s=c(t),d=c(r),p=c(o),K=c(i),z=c(a),m=c(u),J=function(){return(J=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)};function X(e,n){var t={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]]);return t}function $(e,a,u,c){return new(u=u||Promise)(function(t,n){function r(e){try{i(c.next(e))}catch(e){n(e)}}function o(e){try{i(c.throw(e))}catch(e){n(e)}}function i(e){var n;e.done?t(e.value):((n=e.value)instanceof u?n:new u(function(e){e(n)})).then(r,o)}i((c=c.apply(e,a||[])).next())})}function Z(t,r){var o,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:n(0),throw:n(1),return:n(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function n(n){return function(e){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,(n=a?[2&n[0],a.value]:n)[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=r.call(t,u)}catch(e){n=[6,e],i=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,e])}}}function v(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,o,i=t.call(e),a=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a}function y(e,n,t){if(t||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||((r=r||Array.prototype.slice.call(n,0,o))[o]=n[o]);return e.concat(r||n)}function w(){var e=document.createElement("div");e.innerHTML='<style>.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px;} a.btn {display: inline-block;background-color: #0885f2;color: #ffffff;line-height:16px;border: 1px solid #0885f2;outline: none;cursor: pointer;border-radius: 2px;cursor:pointer;} a.btn:hover {color:#fff;}</style> <div  id = "updateBrowseBoxVersion" style = "position: fixed;top: 0;left:0px;width: 100%;color: red;border-bottom: 1px solid #b1b4b9;padding-left: 10px;" class="update-browse-tips" > 您的浏览器版本过低，可能无法正常使用部分功能，请升级。推荐使用谷歌，火狐浏览器<a class="btn btn-update" target="_blank" href="http://browsehappy.osfipin.com/">立即升级</a></div > ';var n;return"WebSocket"in window&&2===window.WebSocket.CLOSING&&!(1<=window.navigator.userAgent.indexOf("MSIE"))||(null===document.getElementById("updateBrowseBoxVersion")&&(void 0===(n=document.getElementsByTagName("body")[0])?setTimeout(f,10):n.insertBefore(e,n.firstChild)),!1)}var g=[],b={},E=[],x=!1,S="normal",a=(O.getStore=function(){return{apps:g,scriptResources:b,currentEnvironment:S,externalOnloadScript:E}},O.prototype.getApps=function(){return{apps:g,scriptResources:b,currentEnvironment:S,externalOnloadScript:E}},O.prototype.isRegister=function(n){var e=g.filter(function(e){return e.name===n.name});return 0<e.length?e:null},O.prototype.register=function(e){Array.isArray(e)&&(e=e.filter(function(n){return!g.some(function(e){return e.name===n.name})}),g=y(y([],v(g)),v(e)))},O.prototype.addRender=function(n){g.forEach(function(e){e.name!==n.name||e.render||(e.render=n.render)})},O.prototype.mounted=function(u){var n=this,c=this;x=x||w();var s,l,e,t,d=u.entry,r=u.appId,o=u.container||"reactSandboxWrap";r?d?(s=u.styleId,(l=function(){var e=n.isRegister(u);e?u=e[0]:g=y(y([],v(g)),[u])}).call(c),e=document.getElementById(o)||document.getElementsByClassName(o),t=document.createElement("div"),o=document.createElement("div"),t.id=s,o.id=r,u.loading&&(o.innerHTML='<div class="preloader"><div class="cs-loader"><div class="cs-loader-inner"><label> ●</label><label> ●</label><label> ●</label><label> ●</label><label> ●</label><label> ●</label></div></div></div><style type="text/css">.reactSandboxWrap{position:relative;min-height: 100%;}.tab-right{padding: 0!important;}.preloader{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden;background:#1890ff;z-index:9999;transition:opacity .65s}.preloader-hidden-add{opacity:1;display:block}.preloader-hidden-add-active{opacity:0}.preloader-hidden{display:none}.cs-loader{position:absolute;top:0;left:0;height:100%;width:100%}.cs-loader-inner{transform:translateY(-50%);top:50%;position:absolute;width:100%;color:#fff;text-align:center}.cs-loader-inner label{font-size:20px;opacity:0;display:inline-block}@keyframes lol{0%{opacity:0;transform:translateX(-300px)}33%{opacity:1;transform:translateX(0)}66%{opacity:1;transform:translateX(0)}100%{opacity:0;transform:translateX(300px)}}.cs-loader-inner label:nth-child(6){animation:lol 3s infinite ease-in-out}.cs-loader-inner label:nth-child(5){animation:lol 3s .1s infinite ease-in-out}.cs-loader-inner label:nth-child(4){animation:lol 3s .2s infinite ease-in-out}.cs-loader-inner label:nth-child(3){animation:lol 3s .3s infinite ease-in-out}.cs-loader-inner label:nth-child(2){animation:lol 3s .4s infinite ease-in-out}.cs-loader-inner label:nth-child(1){animation:lol 3s .5s infinite ease-in-out}</style>'),e?e instanceof HTMLCollection?e[0]?(document.getElementById(t.id)||e[0].appendChild(t),document.getElementById(o.id)||e[0].appendChild(o)):(document.getElementById(t.id)||document.body.appendChild(t),document.getElementById(o.id)||document.body.appendChild(o)):(document.getElementById(t.id)||e.appendChild(t),document.getElementById(o.id)||e.appendChild(o)):(document.getElementById(t.id)||document.body.appendChild(t),document.getElementById(o.id)||document.body.appendChild(o)),function(){if(b&&b.hasOwnProperty(d))return S="sandbox",u.render&&u.render(),void(e=void 0===(e=b[d].styles)?[]:e).forEach(function(e){var n=document.createElement("style"),t=document.getElementById(s);n.innerHTML=e,t.appendChild(n)});var e;q.importHTML(d,c.importHTMLOptions||{}).then(function(i){i.getExternalScripts().then(function(e){var n,t,r,o,a;i.getScripts&&(n=i.getScripts(),t=[],r=n.scripts,o=[],e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(e){o.push({key:e.scripts,code:e.scriptsText})}),n.excludeFiles.hasOwnProperty(d)&&n.excludeFiles[d].forEach(function(n){o.forEach(function(e){-1<e.key.indexOf(n)&&t.push({url:e.key,code:e.code})})}),b[d]={scripts:n.scripts[d],scriptCache:o,excludeSandboxFiles:t,sandbox:[],styles:[]},r.hasOwnProperty(d)&&r[d].forEach(function(n){t.forEach(function(e){e&&e.url.indexOf(n)<0&&b[d].sandbox.push(n)})}),a=[],t.forEach(function(i){function n(){var e=new Promise(function(n,e){var t,r,o;t=i.url,void 0===(r=function(){b[d].scriptCache.forEach(function(e){e.key===i.url&&(E.push({url:i.url,code:e.code}),n(E))})})&&(r=function(){}),(t=void 0===t?"":t)&&((o=document.createElement("script")).src=t,document.body.appendChild(o),o.onload=o.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||r&&r()})});a.push(e)}E.length?E.forEach(function(e){e.url.indexOf(i.url)<0&&e.code!==i.code&&n()}):n()}),Promise.all(a).then(function(e){i.execScripts().then(function(){l.call(c),S="sandbox",u.render&&u.render()}),i.getExternalStyleSheets().then(function(e){b[d].styles.length&&(b[d].styles=[]),e.forEach(function(e){b[d].styles.push(e);var n=document.createElement("style"),t=document.getElementById(s);n.innerHTML=e,t.appendChild(n)})})}))})})}.call(c)):console.error("请先设置应用入口地址entry信息"):console.error("请先设置应用appId信息")},O);function O(e){this.importHTMLOptions={excludeFiles:[],isMerge:!1},e&&"[object Object]"===Object.prototype.toString.call(e)&&(this.importHTMLOptions={excludeFiles:e.excludeFiles||[],isMerge:e.isMerge||!1})}var M=[],_={},T=[],Q=(P.getStore=function(){return{apps:M,scriptResources:_,externalOnloadScript:T}},P.prototype.getApps=function(){return{apps:M,scriptResources:_,externalOnloadScript:T}},P.prototype.isRegister=function(n){var e=M.filter(function(e){return e.name===n.name});return 0<e.length?e:null},P.prototype.register=function(e){Array.isArray(e)&&(e=e.filter(function(n){return!M.some(function(e){return e.name===n.name})}),M=y(y([],v(M)),v(e)))},P.prototype.bootstrap=function(e,i){var n=this,a=e.entry,t=function(){i.getExternalScripts().then(function(e){var n,t,r,o;i.getScripts&&(n=i.getScripts(),t=[],r=n.scripts,o=[],e&&"[object Array]"===Object.prototype.toString.call(e)&&e.forEach(function(e){o.push({key:e.scripts,code:e.scriptsText})}),n.excludeFiles.hasOwnProperty(a)&&n.excludeFiles[a].forEach(function(n){o.forEach(function(e){-1<e.key.indexOf(n)&&t.push({url:e.key,code:e.code})})}),_[a]={scripts:n.scripts[a],scriptCache:o,excludeSandboxFiles:t,sandbox:[],styles:[],externalOnloadScriptPromise:[]},r.hasOwnProperty(a)&&r[a].forEach(function(n){t.forEach(function(e){e&&e.url.indexOf(n)<0&&_[a].sandbox.push(n)})}))})};!function(){n.isRegister(e)||(M=y(y([],v(M)),[e]),t())}.call(this)},P);function P(){}var L=window.requestIdleCallback||function(e){var n=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-n))}})},1)},C=!!navigator.connection&&(navigator.connection.saveData||"wifi"!==navigator.connection.type&&"ethernet"!==navigator.connection.type&&/(2|3)g/.test(navigator.connection.effectiveType));function A(r,o){var e=this;navigator.onLine&&!C&&L(function(){return $(e,void 0,void 0,function(){var n,t;return Z(this,function(e){switch(e.label){case 0:return[4,q.importHTML(r,o)];case 1:return t=e.sent(),n=t.getExternalScripts,t=t.getExternalStyleSheets,L(t),L(n),[2]}})})})}function N(r,o){window.addEventListener("single-spa:first-mount",function e(){var n,t=r.filter(function(e){return h.getAppStatus(e.name)===h.NOT_LOADED});"production"!==process.env.NODE_ENV&&(n=h.getMountedApps(),console.log("[legions] prefetch starting after "+n+" mounted...",t)),t.forEach(function(e){return A(e.entry,o)}),window.removeEventListener("single-spa:first-mount",e)})}function I(e,n){"production"!==process.env.NODE_ENV&&console.log("[legions] prefetch starting for apps...",e),e.forEach(function(e){return A(e.entry,n)})}function k(e,n,t){var r;if(Array.isArray(n))N((r=n,e.filter(function(e){return r.includes(e.name)})),t);else switch(n){case!0:N(e,t);break;case"all":I(e,t)}}function ee(e){return Array.isArray(e)?e:[e]}function ne(e){return"__legions_microapp_wrapper_for_"+d.default(e)+"__"}var H,te=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},re="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures;function oe(e){re&&performance.mark(e)}function ie(e){return"string"==typeof e?document.querySelector(e):e}function ae(e){var n=null!=e?e:{},t=n.bootstrap,e=n.mount,n=n.unmount;return s.default(t)&&s.default(e)&&s.default(n)}(u=H=H||{}).Proxy="Proxy",u.Snapshot="Snapshot",u.LegacyProxy="LegacyProxy";var R="function"==typeof document.all&&void 0===document.all?function(e){return"function"==typeof e&&void 0!==e}:function(e){return"function"==typeof e},B=new WeakMap;var D,j=new WeakMap;(u=D=D||{})[u.STYLE=1]="STYLE",u[u.MEDIA=4]="MEDIA",u[u.SUPPORTS=12]="SUPPORTS",u[u.IMPORT=3]="IMPORT",u[u.FONT_FACE=5]="FONT_FACE",u[u.PAGE=6]="PAGE",u[u.KEYFRAMES=7]="KEYFRAMES",u[u.KEYFRAME=8]="KEYFRAME";function G(e){return[].slice.call(e,0)}var W,F=HTMLBodyElement.prototype.appendChild,U="data-legions",Y=(V.prototype.process=function(r,o){var i=this;if(void 0===o&&(o=""),""!==r.textContent){var e=document.createTextNode(r.textContent||"");this.swapNode.appendChild(e);var n=this.swapNode.sheet,n=G(null!==(n=null==n?void 0:n.cssRules)&&void 0!==n?n:[]),n=this.rewrite(n,o);return r.textContent=n,void this.swapNode.removeChild(e)}new MutationObserver(function(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(V.ModifiedTag in r)return;"childList"===t.type&&(t=r.sheet,t=G(null!==(t=null==t?void 0:t.cssRules)&&void 0!==t?t:[]),t=i.rewrite(t,o),r.textContent=t,r[V.ModifiedTag]=!0)}}).observe(r,{childList:!0})},V.prototype.rewrite=function(e,n){var t=this;void 0===n&&(n="");var r="";return e.forEach(function(e){switch(e.type){case D.STYLE:r+=t.ruleStyle(e,n);break;case D.MEDIA:r+=t.ruleMedia(e,n);break;case D.SUPPORTS:r+=t.ruleSupport(e,n);break;default:r+=""+e.cssText}}),r},V.prototype.ruleStyle=function(e,r){var o=/((?:[^\w\-.#]|^)(body|html|:root))/gm,n=/(html[^\w{[]+)/gm,t=e.selectorText.trim(),i=e.cssText;return"html"===t||"body"===t||":root"===t?i.replace(o,r):(n.test(e.selectorText)&&(/(html[^\w{]+)(\+|~)/gm.test(e.selectorText)||(i=i.replace(n,""))),i=i.replace(/^[\s\S]+{/,function(e){return e.replace(/(^|,\n?)([^,]+)/g,function(e,n,t){return o.test(e)?e.replace(o,function(e){return e&&[",","("].includes(e[0])?""+e[0]+r:r}):""+n+r+" "+t.replace(/^ */,"")})}))},V.prototype.ruleMedia=function(e,n){n=this.rewrite(G(e.cssRules),n);return"@media "+e.conditionText+" {"+n+"}"},V.prototype.ruleSupport=function(e,n){n=this.rewrite(G(e.cssRules),n);return"@supports "+e.conditionText+" {"+n+"}"},V.ModifiedTag="Symbol(style-modified-qiankun)",V);function V(){var e=document.createElement("style");F.call(document.body,e),this.swapNode=e,this.sheet=e.sheet,this.sheet.disabled=!0}var ue=function(e,n,t){W=W||new Y,"LINK"===n.tagName&&console.warn("Feature: sandbox.experimentalStyleIsolation is not support for link element yet."),!e||(e=(e.tagName||"").toLowerCase())&&"STYLE"===n.tagName&&W.process(n,e+"["+U+'="'+t+'"]')},ce=window.__INJECTED_PUBLIC_PATH_BY_LEGIONS__;function se(e,n){return z.default({},{beforeLoad:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return t.__POWERED_BY_LEGIONS__=!0,[2]})})},beforeMount:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return t.__POWERED_BY_LEGIONS__=!0,[2]})})},beforeUnmount:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return delete t.__POWERED_BY_LEGIONS__,[2]})})}},function(n,t){void 0===t&&(t="/");var r=!1;return{beforeLoad:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=t,[2]})})},beforeMount:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return r&&(n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=t),[2]})})},beforeUnmount:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return void 0===ce?delete n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__:n.__INJECTED_PUBLIC_PATH_BY_LEGIONS__=ce,r=!0,[2]})})}}}(t=e,n),function(e,n){return K.default(null!=e?e:[],null!=n?n:[])});var t}var le={},de={},pe={};function fe(t,r,o){Object.keys(de).forEach(function(n){var e;"function"==typeof de[n]&&(!o||(e=pe[o.scope])&&Array.isArray(e)&&e.forEach(function(e){e===n&&de[n](m.default(t),m.default(r),o)}))})}function he(r,i){return{onGlobalStateChange:function(e,n){var t;"function"==typeof e?(de[r]&&console.warn("[legions] '"+r+"' global listener already exists before this, new listener will overwrite it."),de[r]=e,n&&Array.isArray(n.eventScopes)&&n.eventScopes.forEach(function(e){(pe[e.name]||(pe[e.name]=[])).push(r)}),t=m.default(le),n&&n.fireImmediately&&e(t,t)):console.error("[legions] callback must be function!")},setGlobalState:function(r,e){if((r=void 0===r?{}:r)===le)return console.warn("[legions] state has not changed！"),!1;var o=[],n=m.default(le);return le=m.default(Object.keys(r).reduce(function(e,n){var t;return i||e.hasOwnProperty(n)?(o.push(n),Object.assign(e,((t={})[n]=r[n],t))):(console.warn("[legions] '"+n+"' not declared when init state！"),e)},le)),0===o.length?(console.warn("[legions] state has not changed！"),!1):(fe(le,n,e),!0)},offGlobalStateChange:function(){return delete de[r],!0}}}var me=new WeakMap,ve=new WeakMap;function ye(e,n){if(!R(n)||function(e){if(B.has(e))return B.get(e);var n=0===e.name.indexOf("bound ")&&!e.hasOwnProperty("prototype");return B.set(e,n),n}(n)||function(e){if(j.has(e))return j.get(e);var n=e.prototype&&e.prototype.constructor===e&&1<Object.getOwnPropertyNames(e.prototype).length||/^function\b\s[A-Z].*/.test(e.toString())||/^class\b/.test(e.toString());return j.set(e,n),n}(n))return n;var t=ve.get(n);if(t)return t;var r,o=n.bind(e);for(r in n)o[r]=n[r];return"prototype"in n&&(o.prototype=n.prototype),ve.set(n,o),o}var we=0;var ge={undefined:!0,Array:!0,Object:!0,String:!0,Boolean:!0,Math:!0,eval:!0,Number:!0,Symbol:!0,parseFloat:!0,Float32Array:!0},be=Object.defineProperty,Ee=y(["System","__cjsWrapper"],v("development"===process.env.NODE_ENV?["__REACT_ERROR_OVERLAY_GLOBAL_HOOK__"]:[]));var xe=(Se.prototype.active=function(){this.sandboxRunning||we++,this.sandboxRunning=!0},Se.prototype.inactive=function(){var n=this;"production"!==process.env.NODE_ENV&&console.info("[legions:sandbox] "+this.name+" modified global properties restore...",y([],v(this.updatedValueSet.keys()))),0==--we&&Ee.forEach(function(e){n.sandbox.hasOwnProperty(e)&&delete window[e]}),this.sandboxRunning=!1},Se.prototype.createProxySandbox=function(){function t(e){return n.hasOwnProperty(e)||c.hasOwnProperty(e)}var r,o,i,a=this.updatedValueSet,u=this,c=window,e=(r=c,o=new Map,i={},Object.getOwnPropertyNames(r).filter(function(e){e=Object.getOwnPropertyDescriptor(r,e);return!(null!=e&&e.configurable)}).forEach(function(e){var n,t=Object.getOwnPropertyDescriptor(r,e);t&&(n=Object.prototype.hasOwnProperty.call(t,"get"),"top"!==e&&"parent"!==e&&"self"!==e&&"window"!==e&&("test"!==process.env.NODE_ENV||"mockTop"!==e&&"mockSafariTop"!==e)||(t.configurable=!0,n||(t.writable=!0)),n&&o.set(e,!0),be(i,e,Object.freeze(t)))}),{fakeWindow:i,propertiesWithGetter:o}),n=e.fakeWindow,s=e.propertiesWithGetter,l=new Map,d=new window.Proxy(n,{set:function(e,n,t){return u.sandboxRunning&&(-1!==Ee.indexOf(n)&&(c[n]=t),e[n]=t,a.add(n)),!0},get:function(e,n){if(n===Symbol.unscopables)return ge;if("window"===n||"self"===n)return d;if("top"===n||"parent"===n)return d;if("hasOwnProperty"===n)return t;if("document"===n)return me.set(document,d),Promise.resolve().then(function(){return me.delete(document)}),document;n=!s.has(n)&&e[n]||c[n];return ye(c,n)},has:function(e,n){return n in ge||n in e||n in c},getOwnPropertyDescriptor:function(e,n){if(e.hasOwnProperty(n)){var t=Object.getOwnPropertyDescriptor(e,n);return l.set(n,"target"),t}if(c.hasOwnProperty(n)){t=Object.getOwnPropertyDescriptor(c,n);return l.set(n,"rawWindow"),t&&!t.configurable&&(t.configurable=!0),t}},ownKeys:function(e){return Reflect.ownKeys(c).concat(Reflect.ownKeys(e)).filter(function(e){return!(e in this)&&(this[e]=!0)},Object.create(null))},defineProperty:function(e,n,t){return"rawWindow"!==l.get(n)?Reflect.defineProperty(e,n,t):Reflect.defineProperty(c,n,t)},deleteProperty:function(e,n){return e.hasOwnProperty(n)&&(delete e[n],a.delete(n)),!0}});this.sandbox=d},Se.prototype.getSandbox=function(){return this.sandbox},Se);function Se(e){void 0===e&&(e={name:""}),this.eventListeners={},this.timeoutIds=[],this.intervalIds=[],this.updatedValueSet=new Set,this.name="",this.type=H.Proxy,this.sandboxRunning=!0,window.Proxy||console.warn("proxy sandbox is not support by current browser"),this.sandbox=null,this.name=e.name,this.createProxySandbox()}function Oe(e,n){for(var t in e)e.hasOwnProperty(t)&&n(t)}var Me=(_e.prototype.active=function(){var n=this;this.windowSnapshot={},Oe(window,function(e){n.windowSnapshot[e]=window[e]}),Object.keys(this.modifyPropsMap).forEach(function(e){window[e]=n.modifyPropsMap[e]}),this.sandboxRunning=!0},_e.prototype.inactive=function(){var n=this;this.modifyPropsMap={},Oe(window,function(e){window[e]!==n.windowSnapshot[e]&&(n.modifyPropsMap[e]=window[e],window[e]=n.windowSnapshot[e])}),"production"!==process.env.NODE_ENV&&console.info("[legions:sandbox] "+this.name+" origin window restore...",Object.keys(this.modifyPropsMap)),this.sandboxRunning=!1},_e);function _e(e){this.sandboxRunning=!0,this.modifyPropsMap={},this.name=e,this.sandbox=window,this.type=H.Snapshot}var Te=HTMLHeadElement.prototype.appendChild,Pe=HTMLHeadElement.prototype.removeChild,Le=HTMLBodyElement.prototype.appendChild,Ce=HTMLBodyElement.prototype.removeChild,Ae=HTMLHeadElement.prototype.insertBefore,Ne=HTMLElement.prototype.removeChild,Ie="SCRIPT",ke="LINK",He="STYLE";function Re(e){return(null==e?void 0:e.toUpperCase())===ke||(null==e?void 0:e.toUpperCase())===He||(null==e?void 0:e.toUpperCase())===Ie}function Be(e){var n;return!e.textContent&&(null!==(n=e.sheet)&&void 0!==n&&n.cssRules.length||null!==(e=Ye(e))&&void 0!==e&&e.length)}function De(e,n){return Object.defineProperties(e,{srcElement:{get:n},target:{get:n}}),e}function je(t,r,e){void 0===e&&(e=q.fetch);var o=document.createElement("style"),n=t.href;return e(o.dataset.qiankunHref=n).then(function(e){return e.text()}).then(function(e){var n;o.appendChild(document.createTextNode(e)),r(o),n=t,e=De(new CustomEvent("load"),function(){return n}),s.default(n.onload)?n.onload(e):n.dispatchEvent(e)}).catch(function(){var e,n;e=t,n=De(new CustomEvent("error"),function(){return e}),s.default(e.onerror)?e.onerror(n):e.dispatchEvent(n)}),o}var Ge=new WeakMap,We=new WeakMap,Fe=new WeakMap;function Ue(e){e.forEach(function(e){e instanceof HTMLStyleElement&&Be(e)&&e.sheet&&Ge.set(e,e.sheet.cssRules)})}function Ye(e){return Ge.get(e)}function Ve(y){return function(e,n){var t=e,r=y.rawDOMAppendOrInsertBefore,o=y.isInvokedByMicroApp,i=y.containerConfigGetter;if(!Re(t.tagName)||!o(t))return r.call(this,t,n);if(t.tagName){var i=i(t),a=i.appName,u=i.appWrapperGetter,c=i.proxy;i.strictGlobal;var s=i.dynamicStyleSheetElements,l=i.scopedCSS,d=i.excludeAssetFilter;switch(t.tagName){case ke:case He:var p=e,f=p.href;if(d&&f&&d(f))return r.call(this,t,n);var h=u();l&&((null===(v=t.tagName)||void 0===v?void 0:v.toUpperCase())===ke&&"stylesheet"===t.rel&&t.href?(p=je(t,function(e){return ue(h,e,a)},q.fetch),Fe.set(t,p)):ue(h,p,a)),s.push(p);var m=h.contains(n)?n:null;return r.call(h,p,m);case Ie:var f=t.src,v=t.text;if(d&&f&&d(f))return r.call(this,t,n);p=u(),m=p.contains(n)?n:null;if(f){q.execScripts(null,[f],c);f=document.createComment("dynamic script "+f+" replaced by legions");return We.set(t,f),r.call(p,f,m)}q.execScripts(null,["<script>"+v+"<\/script>"],c);v=document.createComment("dynamic inline script replaced by legions");return We.set(t,v),r.call(p,v,m)}}return r.call(this,t,n)}}function qe(o,i){return function(e){var n=e.tagName;if(!Re(n))return o.call(this,e);try{var t=void 0;switch(n){case ke:t=Fe.get(e)||e;break;case Ie:t=We.get(e)||e;break;default:t=e}var r=i(e)();if(r.contains(t))return Ne.call(r,t)}catch(e){console.warn(e)}return o.call(this,e)}}function Ke(e,n){return HTMLHeadElement.prototype.appendChild===Te&&HTMLBodyElement.prototype.appendChild===Le&&HTMLHeadElement.prototype.insertBefore===Ae&&(HTMLHeadElement.prototype.appendChild=Ve({rawDOMAppendOrInsertBefore:Te,containerConfigGetter:n,isInvokedByMicroApp:e}),HTMLBodyElement.prototype.appendChild=Ve({rawDOMAppendOrInsertBefore:Le,containerConfigGetter:n,isInvokedByMicroApp:e}),HTMLHeadElement.prototype.insertBefore=Ve({rawDOMAppendOrInsertBefore:Ae,containerConfigGetter:n,isInvokedByMicroApp:e})),HTMLHeadElement.prototype.removeChild===Pe&&HTMLBodyElement.prototype.removeChild===Ce&&(HTMLHeadElement.prototype.removeChild=qe(Pe,function(e){return n(e).appWrapperGetter}),HTMLBodyElement.prototype.removeChild=qe(Ce,function(e){return n(e).appWrapperGetter})),function(){HTMLHeadElement.prototype.appendChild=Te,HTMLHeadElement.prototype.removeChild=Pe,HTMLBodyElement.prototype.appendChild=Le,HTMLBodyElement.prototype.removeChild=Ce,HTMLHeadElement.prototype.insertBefore=Ae}}function ze(e,o){e.forEach(function(e){if(o(e),e instanceof HTMLStyleElement&&Be(e)){var n=Ye(e);if(n)for(var t=0;t<n.length;t++){var r=n[t];e.sheet.insertRule(r.cssText)}}})}var Je=0,Xe=0;function $e(n,t,e,r,o,i){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=[],u=Ke(function(){return h.checkActivityFunctions(window.location).some(function(e){return e===n})},function(){return{appName:n,appWrapperGetter:t,proxy:e,strictGlobal:!1,scopedCSS:o,dynamicStyleSheetElements:a,excludeAssetFilter:i}});return r||Je++,r&&Xe++,function(){return r||0===Je||Je--,r&&Xe--,0===Xe&&0===Je&&u(),Ue(a),function(){ze(a,function(e){return document.head.appendChild.call(t(),e)}),r&&(a=[])}}}var Ze=Document.prototype.createElement,Qe=new WeakMap,en=new WeakMap;var nn=0,tn=0;function rn(e,n,t,r,o,i){void 0===r&&(r=!0),void 0===o&&(o=!1);var a=Qe.get(t);a||Qe.set(t,a={appName:e,proxy:t,appWrapperGetter:n,dynamicStyleSheetElements:[],strictGlobal:!0,excludeAssetFilter:i,scopedCSS:o});var u=a.dynamicStyleSheetElements,c=(Document.prototype.createElement===Ze&&(Document.prototype.createElement=function(e,n){n=Ze.call(this,e,n);return Re(e)&&(!(e=me.get(this))||(e=Qe.get(e))&&en.set(n,e)),n}),function(){Document.prototype.createElement=Ze}),s=Ke(function(e){return en.has(e)},function(e){return en.get(e)});return r||nn++,r&&tn++,function(){return r||0===nn||nn--,r&&tn--,0===tn&&0===nn&&(s(),c()),Qe.delete(t),Ue(u),function(){ze(u,function(e){return Te.call(n(),e)})}}}function on(){var r=window.setInterval.bind(window),o=window.setTimeout.bind(window),i=[],a=[];return window.setInterval=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=r.apply(void 0,y([],v(e)));return a.push(t),t},window.setTimeout=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=o.apply(void 0,y([],v(e)));return i.push(t),t},function(){var e=this;return window.setInterval=r,window.setTimeout=o,i.forEach(function(n){return $(e,void 0,void 0,function(){return Z(this,function(e){switch(e.label){case 0:return[4,function(n){return $(this,void 0,void 0,function(){return Z(this,function(e){return[2,new Promise(function(e){return setTimeout(e,n)})]})})}(500)];case 1:return e.sent(),window.clearTimeout(n),[2]}})})}),a.forEach(function(e){window.clearInterval(e)}),l.default}}function an(e,n,t,r,o){var i,a=[on,function(){return o=new Map,i=window.addEventListener,a=window.removeEventListener,window.addEventListener=function(e,n,t){var r=o.get(e)||[];return o.set(e,y(y([],v(r)),[n])),i.call(window,e,n,t)},window.removeEventListener=function(e,n,t){var r=o.get(e);return r&&r.length&&-1!==r.indexOf(n)&&r.splice(r.indexOf(n),1),a.call(window,e,n,t)},function(){return o.forEach(function(e,n){return e.forEach(function(e){return window.removeEventListener(n,e)})}),window.addEventListener=i.bind(window),window.removeEventListener=a.bind(window),l.default};var o,i,a},function(){return t=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return l.default},r=[],o=[],window.g_history&&s.default(window.g_history.listen)&&(t=window.g_history.listen.bind(window.g_history),window.g_history.listen=function(e){r.push(e);var n=t(e);return o.push(n),function(){n(),o.splice(o.indexOf(n),1),r.splice(r.indexOf(e),1)}}),function(){var e=l.default;return r.length&&(e=function(){r.forEach(function(e){return window.g_history.listen(e)})}),o.forEach(function(e){return e()}),window.g_history&&s.default(window.g_history.listen)&&(window.g_history.listen=t),e};var t,r,o}];return null===(i=((i={})[H.Proxy]=y(y([],v(a)),[function(){return rn(e,n,t.sandbox,!0,r,o)}]),i[H.Snapshot]=y(y([],v(a)),[function(){return $e(e,n,t.sandbox,!0,r,o)}]),i)[t.type])||void 0===i?void 0:i.map(function(e){return e()})}function un(r,o,i,a){var e,n,t,u,c,s,l=window.Proxy?new xe({name:r}):new Me(r),d=[],p=[],f=(e=r,n=o,t=l,u=i,c=a,null===(s=((s={})[H.Proxy]=[function(){return rn(e,n,t.sandbox,!1,u,c)}],s[H.Snapshot]=[function(){return $e(e,n,t.sandbox,!1,u,c)}],s)[t.type])||void 0===s?void 0:s.map(function(e){return e()}));return{proxy:l.sandbox,mount:function(){return $(this,void 0,void 0,function(){var n,t;return Z(this,function(e){return n=p.slice(0,f.length),t=p.slice(f.length),n.length&&n.forEach(function(e){return e()}),l.active(),window.Proxy&&d.push.apply(d,y([],v(an(r,o,l,i,a)))),t.length&&t.forEach(function(e){return e()}),p=[],[2]})})},unmount:function(){return $(this,void 0,void 0,function(){return Z(this,function(e){return p=y(y([],v(f)),v(d)).map(function(e){return e()}),l.inactive(),[2]})})}}}function cn(e,n){if(!e){if(n)throw new Error(n);throw new Error("[legions] element not existed!")}}function sn(e,t,r){return void 0===r&&(r=window),e.length?e.reduce(function(e,n){return e.then(function(){return n(t,r)})},Promise.resolve()):Promise.resolve()}function ln(n,t,r,o,i,a){return function(){if(r){if(o)throw new Error("[legions]: strictStyleIsolation can not be used with legacy render!");if(i)throw new Error("[legions]: experimentalStyleIsolation can not be used with legacy render!");var e=document.getElementById(ne(t));return cn(e,"[legions] Wrapper element for "+n+" with instance "+t+" is not existed!"),e}e=a();return cn(e,"[legions] Wrapper element for "+n+" with instance "+t+" is not existed!"),o?e.shadowRoot:e}}var dn=HTMLElement.prototype.appendChild,pn=HTMLElement.prototype.removeChild;var fn,hn=document.head.attachShadow||document.head.createShadowRoot;function mn(e,n,t,r){var o=document.createElement("div");o.innerHTML=e;var i=o.firstChild;return n&&(hn?(n=i.innerHTML,i.innerHTML="",(i.attachShadow?i.attachShadow({mode:"open"}):i.createShadowRoot()).innerHTML=n):console.warn("[legions]: As current browser not support shadow dom, your strictStyleIsolation configuration will be ignored!")),t&&(i.getAttribute(U)||i.setAttribute(U,r),t=i.querySelectorAll("style")||[],p.default(t,function(e){ue(i,e,r)})),i}function vn(n,t){return $(this,void 0,void 0,function(){return Z(this,function(e){return[2,"function"==typeof n?n(t):!!n]})})}function yn(U,Y,V){return void 0===Y&&(Y={}),$(this,void 0,void 0,function(){var o,i,s,l,d,p,f,h,m,v,y,w,g,b,E,x,S,O,M,_,T,P,L,C,A,N,I,k,H,R,B,D,j,G,W,F=this;return Z(this,function(e){switch(e.label){case 0:return y=U.entry,o=U.name,i=o+"_"+ +new Date+"_"+Math.floor(1e3*Math.random()),s="[legions] App "+i+" Loading","production"!==process.env.NODE_ENV&&oe(s),p=Y.singular,l=void 0!==p&&p,v=Y.sandbox,d=void 0===v||v,p=Y.excludeAssetFilter,v=X(Y,["singular","sandbox","excludeAssetFilter"]),[4,q.importHTML(y,v)];case 1:return y=e.sent(),f=y.template,h=y.execScripts,m=y.assetPublicPath,v=y.getExternalScripts,y=y.getScripts,(new Q).bootstrap({container:U.container,entry:U.entry,name:o},{getExternalScripts:v,getScripts:y}),[4,vn(l,U)];case 2:return e.sent()?[4,fn&&fn.promise]:[3,4];case 3:e.sent(),e.label=4;case 4:return t=i,r=o,w=function(e){return'<div id="'+ne(t)+'" data-name="'+r+'">'+e+"</div>"}(f),g="object"==typeof d&&!!d.strictStyleIsolation,b="object"==typeof(n=d)&&(!n.strictStyleIsolation&&!!n.experimentalStyleIsolation),E=mn(w,g,b,o),x="container"in U?U.container:void 0,S="render"in U?U.render:void 0,a=o,u=w,c=S,(O=function(e,n){var t=e.element,r=e.loading,o=e.container;if(c)return"production"!==process.env.NODE_ENV&&console.warn("[legions] Custom rendering function is deprecated, you can use the container element setting instead!"),c({loading:r,appContent:t?u:""});var i=ie(o);if("unmounted"!==n&&cn(i,function(){switch(n){case"loading":case"mounting":return"[legions] Target container with "+o+" not existed while "+a+" "+n+"!";case"mounted":return"[legions] Target container with "+o+" not existed after "+a+" "+n+"!";default:return"[legions] Target container with "+o+" not existed while "+a+" rendering!"}}()),i&&!i.contains(t)){for(;i.firstChild;)pn.call(i,i.firstChild);t&&dn.call(i,t)}})({element:E,loading:!0,container:x},"loading"),B=ln(o,i,!!S,g,b,function(){return E}),M=window,_=function(){return Promise.resolve()},T=function(){return Promise.resolve()},d&&(A=un(o,B,b,p),M=A.proxy,_=A.mount,T=A.unmount),B=z.default({},se(M,m),V,function(e,n){return K.default(null!=e?e:[],null!=n?n:[])}),A=B.beforeUnmount,P=void 0===A?[]:A,A=B.afterUnmount,L=void 0===A?[]:A,A=B.afterMount,C=void 0===A?[]:A,A=B.beforeMount,N=void 0===A?[]:A,B=B.beforeLoad,[4,sn(ee(void 0===B?[]:B),U,M)];case 5:return e.sent(),[4,h(M)];case 6:return B=e.sent(),B=function(e,n,t){if(ae(e))return e;if("production"!==process.env.NODE_ENV&&console.warn("[legions] lifecycle not found from "+n+" entry exports, fallback to get from window['"+n+"']"),ae(t=t[n]))return t;throw new Error("[legions] You need to export lifecycle functions in "+n+" entry")}(B,o,M),I=B.bootstrap,k=B.mount,H=B.unmount,R=B.update,B=he(i),D=B.onGlobalStateChange,j=B.setGlobalState,G=B.offGlobalStateChange,W=function(e){return E=e},[2,function(n){void 0===n&&(n=x);var t=E,r=ln(o,i,!!S,g,b,function(){return t}),e={name:i,bootstrap:I,mount:[function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return"production"!==process.env.NODE_ENV&&(performance.getEntriesByName(s,"mark").length||oe(s)),[2]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){switch(e.label){case 0:return[4,vn(l,U)];case 1:return e.sent()&&fn?[2,fn.promise]:[2,void 0]}})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return!(n!==x)&&t||(t=mn(w,g,b,o),W(t)),O({element:t,loading:!0,container:n},"mounting"),[2]})})},_,function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,sn(ee(N),U,M)]})})},function(n){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,k(J(J({},n),{container:r(),setGlobalState:j,onGlobalStateChange:D}))]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,O({element:t,loading:!1,container:n},"mounted")]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,sn(ee(C),U,M)]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){switch(e.label){case 0:return[4,vn(l,U)];case 1:return e.sent()&&(fn=new te),[2]}})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){var n,t;return"production"!==process.env.NODE_ENV&&(n="[legions] App "+i+" Loading Consuming",t=s,re&&performance.getEntriesByName(t,"mark").length&&(performance.measure(n,t),performance.clearMarks(t),performance.clearMeasures(n))),[2]})})}],unmount:[function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,sn(ee(P),U,M)]})})},function(n){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,H(J(J({},n),{container:r()}))]})})},T,function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return[2,sn(ee(L),U,M)]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){return O({element:null,loading:!1,container:n},"unmounted"),G(i),W(t=null),[2]})})},function(){return $(F,void 0,void 0,function(){return Z(this,function(e){switch(e.label){case 0:return[4,vn(l,U)];case 1:return e.sent()&&fn&&fn.resolve(),[2]}})})}]};return"function"==typeof R&&(e.update=R),e}]}var a,u,c,n,t,r})})}var wn={},gn=new te,bn=[];var En=new Map;var xn="[legions] first app mounted";function Sn(n){window.addEventListener("single-spa:no-app-change",function e(){h.getMountedApps().length||h.navigateToUrl(n),window.removeEventListener("single-spa:no-app-change",e)})}"production"!==process.env.NODE_ENV&&console.time(xn),Object.defineProperty(e,"addErrorHandler",{enumerable:!0,get:function(){return h.addErrorHandler}}),Object.defineProperty(e,"getMountedApps",{enumerable:!0,get:function(){return h.getMountedApps}}),Object.defineProperty(e,"removeErrorHandler",{enumerable:!0,get:function(){return h.removeErrorHandler}}),e.MicroApps=a,e.MountedMicroApps=Q,e.addGlobalUncaughtErrorHandler=function(e){window.addEventListener("error",e),window.addEventListener("unhandledrejection",e)},e.getMicroAppStateActions=he,e.initGlobalState=function(e){var n;return(e=void 0===e?{}:e)===le?console.warn("[legions] state has not changed！"):(n=m.default(le),fe(le=m.default(e),n)),he("global-"+ +new Date,!0)},e.loadMicroApp=function(c,s,l){function d(e){if(e=ie(e))return function(e,n){if(n.body.contains(e)){for(var t,r,o="",i=e;i!==n.documentElement;){for(t=0,r=i;r;)1===r.nodeType&&r.nodeName===i.nodeName&&(t+=1),r=r.previousSibling;o="*[name()='"+i.nodeName+"' and namespace-uri()='"+(null===i.namespaceURI?"":i.namespaceURI)+"']["+t+"]/"+o,i=i.parentNode}return o=(o="/*[name()='"+n.documentElement.nodeName+"' and namespace-uri()='"+(null===i.namespaceURI?"":i.namespaceURI)+"']/"+o).replace(/\/$/,"")}}(e,document)}function p(e){return J(J({},e),{bootstrap:function(){return Promise.resolve()}})}var e=this,n=c.props,f=c.name;return h.mountRootParcel(function(){return $(e,void 0,void 0,function(){var n,t,r,o,i,a,u;return Z(this,function(e){switch(e.label){case 0:return(n=(null!=s?s:wn).$$cacheLifecycleByAppName,t="container"in c?c.container:void 0)?n&&(o=En.get(f))?(r=p,[4,o]):[3,2]:[3,4];case 1:return[2,r.apply(void 0,[e.sent()(t)])];case 2:return(u=d(t))?(o=En.get(f+"-"+u))?(i=p,[4,o]):[3,4]:[3,4];case 3:return[2,i.apply(void 0,[e.sent()(t)])];case 4:return a=yn(c,null!=s?s:wn,l),t&&(n?En.set(f,a):(u=d(t))&&En.set(f+"-"+u,a)),[4,a];case 5:return[2,e.sent()(t)]}})})},J({domElement:document.createElement("div")},n))},e.prefetchApps=I,e.registerMicroApps=function(e,s){var r=this,e=e.filter(function(n){return!bn.some(function(e){return e.name===n.name})});bn=y(y([],v(bn)),v(e)),e.forEach(function(e){var o=e.name,n=e.activeRule,t=e.loader,i=void 0===t?l.default:t,a=e.props,t=e.isMerge,u=void 0!==t&&t,c=X(e,["name","activeRule","loader","props","isMerge"]);h.registerApplication({name:o,app:function(){return $(r,void 0,void 0,function(){var n,t,r=this;return Z(this,function(e){switch(e.label){case 0:return i(!0),[4,gn.promise];case 1:return e.sent(),[4,yn(J({name:o,props:a},c),J(J({},wn),{isMerge:u}),s)];case 2:return t=e.sent()(),n=t.mount,t=X(t,["mount"]),[2,J({mount:y(y([function(){return $(r,void 0,void 0,function(){return Z(this,function(e){return[2,i(!0)]})})}],v(ee(n))),[function(){return $(r,void 0,void 0,function(){return Z(this,function(e){return[2,i(!1)]})})}])},t)]}})})},activeWhen:n,customProps:a})})},e.removeGlobalUncaughtErrorHandler=function(e){window.removeEventListener("error",e),window.removeEventListener("unhandledrejection",e)},e.runAfterFirstMounted=function(n){window.addEventListener("single-spa:first-mount",function e(){"production"!==process.env.NODE_ENV&&console.timeEnd(xn),n(),window.removeEventListener("single-spa:first-mount",e)})},e.runDefaultMountEffects=function(e){console.warn("[legions] runDefaultMountEffects will be removed in next version, please use setDefaultMountApp instead"),Sn(e)},e.setDefaultMountApp=Sn,e.start=function(e){var n=(wn=J({prefetch:!0,singular:!0,sandbox:!0},e=void 0===e?{}:e)).prefetch,t=wn.sandbox,r=wn.singular,o=wn.urlRerouteOnly,e=X(wn,["prefetch","sandbox","singular","urlRerouteOnly"]);n&&k(bn,n,e),t&&(window.Proxy||(console.warn("[legions] Miss window.Proxy, proxySandbox will degenerate into snapshotSandbox"),wn.sandbox="object"==typeof t?J(J({},t),{loose:!0}):{loose:!0},r||console.warn("[legions] Setting singular as false may cause unexpected behavior while your browser not support window.Proxy"))),h.start({urlRerouteOnly:o}),gn.resolve()},Object.defineProperty(e,"__esModule",{value:!0})});
