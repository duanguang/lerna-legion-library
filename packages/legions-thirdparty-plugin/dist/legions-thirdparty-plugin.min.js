/**
 * legions-thirdparty-plugin v0.0.1
 * (c) 2020 duanguang
 * @license MIT
 */
var legionsThirdpartyPlugin=function(e){"use strict";var t="function"==typeof Symbol&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator";var r,n,i,o=[];function s(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}function a(){this._keys=[],this._values=[],this._cacheKey=r,this._cacheIndex=-2}function u(e,t){return e}function c(e,t){return t}function h(e,t){return[e,t]}var l=new("object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?(r={},n=[],s.prototype["@@iterator"]=function(){return this},s.prototype[t]=function(){return this},s.prototype.next=function(){var e=this._index;if(0<=e&&e<this._keys.length){var t=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=n,this._values=n):this._index++,{value:t,done:!1}}return{value:void 0,done:!0}},s.prototype.throw=function(e){throw 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),e},s.prototype.return=function(e){return 0<=this._index&&(this._index=-1,this._keys=n,this._values=n),{value:e,done:!0}},i=s,Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),a.prototype.has=function(e){return 0<=this._find(e,!1)},a.prototype.get=function(e){var t=this._find(e,!1);return 0<=t?this._values[t]:void 0},a.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},a.prototype.delete=function(e){var t=this._find(e,!1);if(0<=t){for(var n=this._keys.length,i=t+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=r,this._cacheIndex=-2),!0}return!1},a.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=r,this._cacheIndex=-2},a.prototype.keys=function(){return new i(this._keys,this._values,u)},a.prototype.values=function(){return new i(this._keys,this._values,c)},a.prototype.entries=function(){return new i(this._keys,this._values,h)},a.prototype["@@iterator"]=function(){return this.entries()},a.prototype[t]=function(){return this.entries()},a.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},a):Map),d="focus-outside";function p(t){return o.find(function(e){return e.contains(t)||e===t})}function y(e){var t,n=p(e.target);!n||(t=_(l.entries(),n)||{}).el&&clearTimeout(t.nodeList.timerId)}function f(e){var t,n,i=p(e.target);i&&(n=(t=_(l.entries(),i)||{}).key,t.el&&(t.nodeList.timerId=setTimeout(n,10)))}function _(e,s){var o={};return l.forEach(function(e,t){var n=t,i=e,r=i.find(function(e){return e.node===s});r&&(o={key:n,nodeList:i,el:r})}),o}var v={excel:"legionsThirdpartyExcelPlugin",html2canvas:"legionsThirdpartyHtml2canvasPlugin",jsBarcode:"legionsThirdpartyJsbarcodePlugin",clipboard:"legionsThirdpartyClipboardPlugin",dexie:"legionsThirdpartyDexiePlugin"},g={excel:null,html2canvas:null,jsBarcode:null,clipboard:null,dexie:null};function m(e){var t,n,i="legions-"+e.name;window[v[e.name]]||window.parent[v[e.name]]||document.getElementById(i)||((t=document.createElement("script")).id=i,n=Date.parse((new Date).toString()),t.src=e.url+"?v="+n,document.body.appendChild(t),t.onload=t.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||("jsBarcode"===e.name?g[e.name]=window[v[e.name]].JsBarcode:"dexie"===e.name?g[e.name]=window[v[e.name]].DexieUtils:g[e.name]=window[v[e.name]])})}var x=(b.prototype.use=function(e){"object"==typeof e&&(Array.isArray(e)?e.map(function(e){m(e)}):m(e))},b.prototype.subscribe=function(e,t){var n,i,r;"string"==typeof e?g[e]?t():n=setInterval(function(){g[e]&&(t(),clearInterval(n))},150):"[object Array]"===Object.prototype.toString.call(e)&&(i=[],e.map(function(e){i.push({name:e,value:g[e]})}),i.every(function(e){return e.value})?t():(i=[],r=setInterval(function(){e.map(function(e){i.push({name:e,value:g[e]})}),i.every(function(e){return e.value})?(t(),clearInterval(r)):i=[]},150)))},Object.defineProperty(b.prototype,"plugins",{get:function(){return g},enumerable:!1,configurable:!0}),b);function b(){}var k=new x;return e.LegionsThirdpartyPlugin=x,e.focusBind=function(e,t,n){var i,r,s;n&&(d=n),o.indexOf(e)<0&&o.push(e),l.has(t)?l.get(t).push({node:e,oldTabIndex:e.getAttribute("tabindex")}):l.set(t,[{node:e,oldTabIndex:e.getAttribute("tabindex")}]),isNaN(parseInt(e.getAttribute("tabindex")))&&e.setAttribute("tabindex",-1),r=d,-1<(s=(i=e).className.split(" ")).indexOf(r)||(s.push(r),i.className=s.join(" ")),e.addEventListener("focusin",y),e.addEventListener("focusout",f)},e.legionsThirdpartyPlugin=k,e}({});