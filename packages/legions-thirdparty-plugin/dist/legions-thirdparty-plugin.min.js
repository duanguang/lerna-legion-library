/**
 * legions-thirdparty-plugin v0.0.5
 * (c) 2020 duanguang
 * @license MIT
 */
var legionsThirdpartyPlugin=function(e){"use strict";var o=[],d=new Map,u="focus-outside";function r(n){return o.find(function(e){return e.contains(n)||e===n})}function l(e){var n,t=r(e.target);!t||(n=a(d.entries(),t)||{}).el&&clearTimeout(n.nodeList.timerId)}function s(e){var n,t,i=r(e.target);i&&(t=(n=a(d.entries(),i)||{}).key,n.el&&(n.nodeList.timerId=setTimeout(t,10)))}function a(e,a){var o={};return d.forEach(function(e,n){var t=n,i=e,r=i.find(function(e){return e.node===a});r&&(o={key:t,nodeList:i,el:r})}),o}var c={excel:"legionsThirdpartyExcelPlugin",html2canvas:"legionsThirdpartyHtml2canvasPlugin",jsBarcode:"legionsThirdpartyJsbarcodePlugin",clipboard:"legionsThirdpartyClipboardPlugin",dexie:"legionsThirdpartyDexiePlugin"},p={excel:null,html2canvas:null,jsBarcode:null,clipboard:null,dexie:null};function n(e){var n,t,i="legions-"+e.name;window[c[e.name]]||window.parent[c[e.name]]||document.getElementById(i)||((n=document.createElement("script")).id=i,t=Date.parse((new Date).toString()),n.src=e.url+"v="+t,document.body.appendChild(n),n.onload=n.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(p[e.name]=window[c[e.name]])})}var t=(i.prototype.use=function(e){"object"==typeof e&&(Array.isArray(e)?e.map(function(e){n(e)}):n(e))},Object.defineProperty(i.prototype,"plugins",{get:function(){return p},enumerable:!1,configurable:!0}),i);function i(){}var g=new t;return e.LegionsThirdpartyPlugin=t,e.focusBind=function(e,n,t){var i,r,a;t&&(u=t),o.indexOf(e)<0&&o.push(e),d.has(n)?d.get(n).push({node:e,oldTabIndex:e.getAttribute("tabindex")}):d.set(n,[{node:e,oldTabIndex:e.getAttribute("tabindex")}]),isNaN(parseInt(e.getAttribute("tabindex")))&&e.setAttribute("tabindex",-1),r=u,-1<(a=(i=e).className.split(" ")).indexOf(r)||(a.push(r),i.className=a.join(" ")),e.addEventListener("focusin",l),e.addEventListener("focusout",s)},e.legionsThirdpartyPlugin=g,e}({});