!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).legionsThirdpartyPlugin={})}(this,function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e){return t(e={exports:{}},e.exports),e.exports}function r(t){return t&&t.Math==Math&&t}function c(t){try{return!!t()}catch(t){return!0}}function m(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function o(t){return S.call(t).slice(8,-1)}function i(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return O(i(t))}function a(t){return"object"==typeof t?null!==t:"function"==typeof t}function v(t,e){if(!a(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!a(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!a(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function l(t,e){return j.call(t,e)}function f(t){return E?P.createElement(t):{}}function s(t){if(!a(t))throw TypeError(String(t)+" is not an object");return t}function p(e,n){try{I(d,e,n)}catch(t){d[e]=n}return n}var d=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),y=!c(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),g={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,b={f:h&&!g.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:g},S={}.toString,w="".split,O=c(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==o(t)?w.call(t,""):Object(t)}:Object,j={}.hasOwnProperty,P=d.document,E=a(P)&&a(P.createElement),L=!y&&!c(function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a}),T=Object.getOwnPropertyDescriptor,x={f:y?T:function(t,e){if(t=u(t),e=v(e,!0),L)try{return T(t,e)}catch(t){}if(l(t,e))return m(!b.f.call(t,e),t[e])}},A=Object.defineProperty,M={f:y?A:function(t,e,n){if(s(t),e=v(e,!0),s(n),L)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=y?function(t,e,n){return M.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},k="__core-js_shared__",C=d[k]||p(k,{}),D=Function.toString;"function"!=typeof C.inspectSource&&(C.inspectSource=function(t){return D.call(t)});function B(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++K+X).toString(36)}function R(t){return Y[t]||(Y[t]=B(t))}var F,N,_,G,V,z,U,H,W=C.inspectSource,q=d.WeakMap,J="function"==typeof q&&/native code/.test(W(q)),$=n(function(t){(t.exports=function(t,e){return C[t]||(C[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),K=0,X=Math.random(),Y=$("keys"),Q={},Z=d.WeakMap;U=J?(F=new Z,N=F.get,_=F.has,G=F.set,V=function(t,e){return G.call(F,t,e),e},z=function(t){return N.call(F,t)||{}},function(t){return _.call(F,t)}):(H=R("state"),Q[H]=!0,V=function(t,e){return I(t,H,e),e},z=function(t){return l(t,H)?t[H]:{}},function(t){return l(t,H)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(bt[t])||tt(d[t]):bt[t]&&bt[t][e]||d[t]&&d[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?wt:St)(t)}function rt(t){return 0<t?Ot(nt(t),9007199254740991):0}function ot(t,e){var n=nt(t);return n<0?jt(n+e,0):Pt(n,e)}function it(a){return function(t,e,n){var r,o=u(t),i=rt(o.length),c=ot(n,i);if(a&&e!=e){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((a||c in o)&&o[c]===e)return a||c||0;return!a&&-1}}function ct(t,e){var n,r=u(t),o=0,i=[];for(n in r)!l(Q,n)&&l(r,n)&&i.push(n);for(;e.length>o;)l(r,n=e[o++])&&(~Et(i,n)||i.push(n));return i}function at(t,e){var n=Ct[kt(t)];return n==Bt||n!=Dt&&("function"==typeof e?c(e):!!e)}function ut(t,e){var n,r,o,i,c=t.target,a=t.global,u=t.stat,f=a?d:u?d[c]||p(c,{}):(d[c]||{}).prototype;if(f)for(n in e){if(o=e[n],r=t.noTargetGet?(i=Ft(f,n))&&i.value:f[n],!Rt(a?n:c+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;!function(t,e){for(var n=Mt(e),r=M.f,o=x.f,i=0;i<n.length;i++){var c=n[i];l(t,c)||r(t,c,o(e,c))}}(o,r)}(t.sham||r&&r.sham)&&I(o,"sham",!0),vt(f,n,o,t)}}function ft(r,o,t){if(!function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(r),void 0===o)return r;switch(t){case 0:return function(){return r.call(o)};case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}function lt(t){return Object(i(t))}function st(t){return l(Vt,t)||(_t&&l(zt,t)?Vt[t]=zt[t]:Vt[t]=Ut("Symbol."+t)),Vt[t]}function pt(t,e){var n;return Nt(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Nt(n.prototype))||a(n)&&null===(n=n[Ht]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function dt(d){var y=1==d,g=2==d,h=3==d,m=4==d,v=6==d,b=5==d||v;return function(t,e,n,r){for(var o,i,c=lt(t),a=O(c),u=ft(e,n,3),f=rt(a.length),l=0,s=r||pt,p=y?s(t,f):g?s(t,0):void 0;l<f;l++)if((b||l in a)&&(i=u(o=a[l],l,c),d))if(y)p[l]=i;else if(i)switch(d){case 3:return!0;case 5:return o;case 6:return l;case 2:Wt.call(p,o)}else if(m)return!1;return v?-1:h||m?m:p}}function yt(t,e){var n=[][t];return!!n&&c(function(){n.call(null,e||function(){throw 1},1)})}function gt(t){throw t}function ht(t,e){if(l($t,t))return $t[t];var n=[][t],r=!!l(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=l(e,0)?e[0]:gt,i=l(e,1)?e[1]:void 0;return $t[t]=!!n&&!c(function(){if(r&&!y)return 1;var t={length:-1};r?Jt(t,1,{enumerable:!0,get:gt}):t[1]=1,n.call(t,o,i)})}var mt={set:V,get:z,has:U,enforce:function(t){return U(t)?z(t):V(t,{})},getterFor:function(n){return function(t){var e;if(!a(t)||(e=z(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},vt=n(function(t){var e=mt.get,a=mt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var o=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||l(n,"name")||I(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==d?(o?!c&&t[e]&&(i=!0):delete t[e],i?t[e]=n:I(t,e,n)):i?t[e]=n:p(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||W(this)})}),bt=d,St=Math.ceil,wt=Math.floor,Ot=Math.min,jt=Math.max,Pt=Math.min,Et={includes:it(!0),indexOf:it(!1)}.indexOf,Lt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Tt=Lt.concat("length","prototype"),xt={f:Object.getOwnPropertyNames||function(t){return ct(t,Tt)}},At={f:Object.getOwnPropertySymbols},Mt=et("Reflect","ownKeys")||function(t){var e=xt.f(s(t)),n=At.f;return n?e.concat(n(t)):e},It=/#|\.prototype\./,kt=at.normalize=function(t){return String(t).replace(It,".").toLowerCase()},Ct=at.data={},Dt=at.NATIVE="N",Bt=at.POLYFILL="P",Rt=at,Ft=x.f,Nt=Array.isArray||function(t){return"Array"==o(t)},_t=!!Object.getOwnPropertySymbols&&!c(function(){return!String(Symbol())}),Gt=_t&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Vt=$("wks"),zt=d.Symbol,Ut=Gt?zt:zt&&zt.withoutSetter||B,Ht=st("species"),Wt=[].push,qt={forEach:dt(0),map:dt(1),filter:dt(2),some:dt(3),every:dt(4),find:dt(5),findIndex:dt(6)},Jt=Object.defineProperty,$t={},Kt=qt.every,Xt=yt("every"),Yt=ht("every");ut({target:"Array",proto:!0,forced:!Xt||!Yt},{every:function(t,e){return Kt(this,t,1<arguments.length?e:void 0)}});function Qt(){}function Zt(t){return"<script>"+t+"</"+ie+">"}var te,ee=Object.keys||function(t){return ct(t,Lt)},ne=y?Object.defineProperties:function(t,e){s(t);for(var n,r=ee(e),o=r.length,i=0;i<o;)M.f(t,n=r[i++],e[n]);return t},re=et("document","documentElement"),oe="prototype",ie="script",ce=R("IE_PROTO"),ae=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ae=te?function(t){t.write(Zt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(te):((e=f("iframe")).style.display="none",re.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Zt("document.F=Object")),t.close(),t.F);for(var n=Lt.length;n--;)delete ae[oe][Lt[n]];return ae()};Q[ce]=!0;var ue=Object.create||function(t,e){var n;return null!==t?(Qt[oe]=s(t),n=new Qt,Qt[oe]=null,n[ce]=t):n=ae(),void 0===e?n:ne(n,e)},fe=st("unscopables"),le=Array.prototype;null==le[fe]&&M.f(le,fe,{configurable:!0,value:ue(null)});var se,pe=qt.findIndex,de="findIndex",ye=!0,ge=ht(de);de in[]&&Array(1)[de](function(){ye=!1}),ut({target:"Array",proto:!0,forced:ye||!ge},{findIndex:function(t,e){return pe(this,t,1<arguments.length?e:void 0)}}),se=de,le[fe][se]=!0;var he=qt.forEach,me=yt("forEach"),ve=ht("forEach"),be=me&&ve?[].forEach:function(t,e){return he(this,t,1<arguments.length?e:void 0)};ut({target:"Array",proto:!0,forced:[].forEach!=be},{forEach:be});var Se,we,Oe=et("navigator","userAgent")||"",je=d.process,Pe=je&&je.versions,Ee=Pe&&Pe.v8;Ee?we=(Se=Ee.split("."))[0]+Se[1]:Oe&&(!(Se=Oe.match(/Edge\/(\d+)/))||74<=Se[1])&&(Se=Oe.match(/Chrome\/(\d+)/))&&(we=Se[1]);function Le(e){return 51<=Te||!c(function(){var t=[];return(t.constructor={})[xe]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var Te=we&&+we,xe=st("species"),Ae=qt.map,Me=Le("map"),Ie=ht("map");ut({target:"Array",proto:!0,forced:!Me||!Ie},{map:function(t,e){return Ae(this,t,1<arguments.length?e:void 0)}});var ke=Le("splice"),Ce=ht("splice",{ACCESSORS:!0,0:0,1:2}),De=Math.max,Be=Math.min;ut({target:"Array",proto:!0,forced:!ke||!Ce},{splice:function(t,e){var n,r,o,i,c,a,u,f,l,s,p=arguments,d=lt(this),y=rt(d.length),g=ot(t,y),h=arguments.length;if(0===h?n=r=0:r=1===h?(n=0,y-g):(n=h-2,Be(De(nt(e),0),y-g)),9007199254740991<y+n-r)throw TypeError("Maximum allowed length exceeded");for(o=pt(d,r),i=0;i<r;i++)(c=g+i)in d&&(u=o,f=i,l=d[c],s=void 0,(s=v(f))in u?M.f(u,s,m(0,l)):u[s]=l);if(n<(o.length=r)){for(i=g;i<y-r;i++)a=i+n,(c=i+r)in d?d[a]=d[c]:delete d[a];for(i=y;y-r+n<i;i--)delete d[i-1]}else if(r<n)for(i=y-r;g<i;i--)a=i+n-1,(c=i+r-1)in d?d[a]=d[c]:delete d[a];for(i=0;i<n;i++)d[i+g]=p[i+2];return d.length=y-r+n,o}});var Re=M.f,Fe=Function.prototype,Ne=Fe.toString,_e=/^\s*function ([^ (]*)/;!y||"name"in Fe||Re(Fe,"name",{configurable:!0,get:function(){try{return Ne.call(this).match(_e)[1]}catch(t){return""}}}),ut({target:"Object",stat:!0,forced:c(function(){ee(1)})},{keys:function(t){return ee(lt(t))}});var Ge={};Ge[st("toStringTag")]="z";var Ve="[object z]"===String(Ge),ze=st("toStringTag"),Ue="Arguments"==o(function(){return arguments}()),He=Ve?o:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ze))?n:Ue?o(e):"Object"==(r=o(e))&&"function"==typeof e.callee?"Arguments":r},We=Ve?{}.toString:function(){return"[object "+He(this)+"]"};Ve||vt(Object.prototype,"toString",We,{unsafe:!0});var qe="toString",Je=RegExp.prototype,$e=Je[qe],Ke=c(function(){return"/a/b"!=$e.call({source:"a",flags:"b"})}),Xe=$e.name!=qe;(Ke||Xe)&&vt(RegExp.prototype,qe,function(){var t=s(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Je)?function(){var t=s(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}.call(t):n)},{unsafe:!0});for(var Ye in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Qe=d[Ye],Ze=Qe&&Qe.prototype;if(Ze&&Ze.forEach!==be)try{I(Ze,"forEach",be)}catch(t){Ze.forEach=be}}var tn=n(function(e){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n});function en(t,e){if(void 0===t)return-1;for(var n=-1,r=0;r<t.length;++r)if(t[r]===e){n=r;break}return n}var nn={excel:"legionsThirdpartyExcelPlugin",html2canvas:"legionsThirdpartyHtml2canvasPlugin",jsBarcode:"legionsThirdpartyJsbarcodePlugin",clipboard:"legionsThirdpartyClipboardPlugin",dexie:"legionsThirdpartyDexiePlugin",focusOutside:"legionsThirdpartyFocusOutsidePlugin"},rn=[];function on(e,n){e&&(e.DataOrigin.has("openBrowserUpdateMessage")||e.DataOrigin.add("openBrowserUpdateMessage",function(){var t="isOpenBrowserUpdateMessage";e.DataOrigin.get(t)||("function"==typeof n&&n(),e.DataOrigin.has(t)?e.DataOrigin.update(t,!0):e.DataOrigin.add(t,!0))}))}var cn,an=(cn=null,function(t){if(void 0===t&&(t={}),cn)return t&&"function"==typeof t.onLoaded&&t.onLoaded&&t.onLoaded(),on(cn),cn;var e=null;try{window.legionsPlugins&&0<Object.keys(window.legionsPlugins).length?e=window.legionsPlugins:window.parent.legionsPlugins&&0<Object.keys(window.parent.legionsPlugins).length&&(e=window.parent.legionsPlugins)}catch(t){e=window.legionsPlugins}finally{e||(t&&"function"==typeof t.onLoaded&&rn.push(t.onLoaded),t&&function(t){void 0===t&&(t={});var e,n,r="legions-plugin-sdk";un("legionsPlugins")||document.getElementById(r)||((e=document.createElement("script")).id=r,n=Date.parse((new Date).toString()),t&&"string"==typeof t.src&&t.src?e.src=t.src:e.src="production"===process.env.environment?"https://hoolinks.com/static/common/plugins/legions-plugin-sdk.min.js?v="+n:"https://qa-zy.hoolinks.com/static/plugin/legions-plugin-sdk.js?v="+n,document.body.appendChild(e),e.onload=e.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||(on(an(),t.notification),t&&"function"==typeof t.onLoaded&&t.onLoaded&&t.onLoaded(),rn.map(function(t){t()}),rn=[])})}(t))}return cn=e});function un(t){var e=null;try{e=window.parent[t]}catch(t){e=null}return e=e||window[t]}var fn=["excel","html2canvas","jsBarcode","clipboard","dexie","focusOutside"];function ln(){return{excel:null,html2canvas:null,jsBarcode:null,clipboard:null,dexie:null,focusOutside:null}}var sn,pn,dn=ln(),yn=ln();function gn(t){var e,n,r="legions-"+t.name,o=null;try{o=window.parent[nn[t.name]]}catch(t){o=null}(o=o||window[nn[t.name]])||document.getElementById(r)?o&&("jsBarcode"===t.name?dn[t.name]=o.JsBarcode:"dexie"===t.name?dn[t.name]=o.DexieUtils:dn[t.name]=o):((e=document.createElement("script")).id=r,n=Date.parse((new Date).toString()),e.src=t.url+"?v="+n,document.body.appendChild(e),e.onload=e.onreadystatechange=function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||window[nn[t.name]]&&("jsBarcode"===t.name?dn[t.name]=window[nn[t.name]].JsBarcode:"dexie"===t.name?dn[t.name]=window[nn[t.name]].DexieUtils:dn[t.name]=window[nn[t.name]],mn.emit(t.name),mn.off(t.name))})}function hn(){this.cache={}}sn=yn,pn=dn,Object.keys(pn).forEach(function(t){Object.defineProperty(sn,t,{configurable:!1,get:function(){return pn[t]||console.error(t+":Property has no value yet,it is possible that the Plugin is not ready, Please install at the entrance(legionsThirdpartyPlugin.use({name:'"+t+"',url:''}))"),pn[t]}})});var mn=new(hn.prototype.on=function(e,t){if(-1<fn.findIndex(function(t){return t===e})){if("function"!=typeof t)return void console.warn("callback not an executable function");this.cache[e]=this.cache[e]||[],this.cache[e].push(t)}else console.warn("输入的插件不在可使用队列")},hn.prototype.emit=function(t,e){if(this.cache[t]&&"[object Array]"===Object.prototype.toString.call(this.cache[t]))if("function"==typeof e){if(-1===en(this.cache[t],e))return;e()}else this.cache[t].forEach(function(t){return t()})},hn.prototype.off=function(t,e){if(this.cache[t]&&"[object Array]"===Object.prototype.toString.call(this.cache[t]))if(e&&"function"==typeof e){var n=en(this.cache[t],e);if(-1===n)return;this.cache[t].splice(n,1)}else this.cache[t]=[]},hn),vn=(bn.prototype.use=function(t){"object"===tn(t)&&(Array.isArray(t)?t.map(function(t){gn(t)}):gn(t))},bn.prototype.subscribe=function(t,e){var n,r;"string"==typeof t?dn[t]?e():mn.on(t,e):"[object Array]"===Object.prototype.toString.call(t)&&(n=[],t.map(function(t){n.push({name:t,value:dn[t]})}),n.every(function(t){return t.value})?e():(n=[],r=setInterval(function(){t.map(function(t){n.push({name:t,value:dn[t]})}),n.every(function(t){return t.value})?(e(),clearInterval(r)):n=[]},400)))},Object.defineProperty(bn.prototype,"plugins",{get:function(){return yn},enumerable:!1,configurable:!0}),bn);function bn(){}var Sn=new vn;t.LegionsPluginsExecute=function(e){an(function(){var t=an();t&&e&&e(t)})},t.LegionsThirdpartyPlugin=vn,t.dynamicLoadingScript=function(n){var r,t;n&&(r=un(n.library),(t=document.getElementById(n.scriptId))||r?t&&!r&&console.warn("定义了相同节点ID，检查scriptId 值"):function(){var t=document.createElement("script");t.src=n.src,t.id=n.scriptId||"legions-plugin-sdk";var e=t;document.getElementById(t.id)?e=document.getElementById(t.id):document.body.appendChild(t),e.addEventListener("load",function(){this.readyState&&!/^(loaded|complete)$/.test(this.readyState)||"function"==typeof n.loaded&&n.loaded(r)})}())},t.findWindow=un,t.legionsPlugins=an,t.legionsThirdpartyPlugin=Sn,Object.defineProperty(t,"__esModule",{value:!0})});
