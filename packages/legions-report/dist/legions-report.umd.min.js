/**
  *  legions-report v0.0.5
  * (c) 2020 duanguang
  * @license MIT
  */
var legionsReport=function(e){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])})(e,r)};function n(t){var o="";return Object.keys(t).forEach(function(e){var r=t[e];"[object Object]"===Object.prototype.toString.call(r)?o+=e+"="+function(e){if(window.JSON&&window.JSON.stringify)return JSON.stringify(e);var r=typeof e;if("object"!=r||null===e)return"string"==r&&(e='"'+e+'"'),String(e);var t,o,n=[],i=e&&e.constructor==Array,s=arguments.callee;for(t in e)e.hasOwnProperty(t)&&(r=typeof(o=e[t]),e.hasOwnProperty(t)&&("string"==r?o='"'+o+'"':"object"==r&&null!==o&&(o=s(o)),n.push((i?"":'"'+t+'":')+String(o))));return(i?"[":"{")+String(n)+(i?"]":"}")}(t[e]):o+=e+"="+t[e]+"^"}),encodeURIComponent(o.substr(0,o.length-1))}var r,o,i,s,a=(s={browser:"",version:"",OS:"",init:function(){this.browser=this.getBrowser().browser||"\u672a\u77e5\u6d4f\u89c8\u5668",this.version=this.getBrowser().version||"\u672a\u77e5\u6d4f\u89c8\u5668\u7248\u672c\u53f7",this.OS=this.getOS()+" "+this.getDigits()||"\u672a\u77e5\u64cd\u4f5c\u7cfb\u7edf"},getOS:function(){var e=navigator.userAgent.toLowerCase(),r="Win32"==navigator.platform||"Win64"==navigator.platform||"wow64"==navigator.platform,t="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;if(t)return"Mac";if("X11"==navigator.platform&&!r&&!t)return"Unix";var o=-1<String(navigator.platform).indexOf("Linux"),n="android"==e.toLowerCase().match(/android/i);if(o)return n?"Android":"Linux";if(r){if(-1<e.indexOf("Windows nt 5.0")||-1<e.indexOf("Windows 2000"))return"Win2000";var i=-1<e.indexOf("Windows nt 5.1")||-1<e.indexOf("Windows XP");if(e.indexOf("Windows XP"),i)return"WinXP";if(-1<e.indexOf("Windows nt 5.2")||-1<e.indexOf("Windows 2003"))return"Win2003";if(-1<e.indexOf("Windows nt 6.0")||-1<e.indexOf("Windows Vista"))return"WinVista";if(-1<e.indexOf("windows nt 6.1")||-1<e.indexOf("Windows 7"))return"Win7";if(-1<e.indexOf("windows nt 6.2")||-1<e.indexOf("Windows 8"))return"Win8";if(-1<e.indexOf("windows nt 10.0")||-1<e.indexOf("Windows 10"))return"Win10"}return"\u5176\u4ed6"},getDigits:function(){var e=navigator.userAgent.toLowerCase();if(-1<e.indexOf("win64")||-1<e.indexOf("wow64"))return"64\u4f4d";var r=/mac os x ([\w.]+).*()\)/.exec(e);return null!==r?r[1]:"32\u4f4d"},getBrowser:function(){var e,r,t=navigator.userAgent.toLowerCase(),o=function(){var e=navigator.userAgent,r=e.toLowerCase().match(/rv:([\d.]+)\) like gecko/),t=-1<e.indexOf("Opera"),o=-1<e.indexOf("compatible")&&-1<e.indexOf("MSIE")&&!t||r,n=-1<e.indexOf("Edge"),i=-1<e.indexOf("Firefox"),s=-1<e.indexOf("Safari")&&-1==e.indexOf("Chrome"),a=-1<e.indexOf("Chrome")&&-1<e.indexOf("Safari");if(o){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var c=parseFloat(RegExp.$1);return 7==c?"IE7":8==c?"IE8":9==c?"IE9":10==c?"IE10":r?"IE11":"IE"}return t?"Opera":n?"Edge":i?"Firefox":s?"Safari":a?"Chrome":"--"}();if(-1<o.indexOf("IE"))switch(o){case"IE7":return{browser:"Microsoft IE",desc:"IE: 7",version:7};case"IE8":return{browser:"Microsoft IE",desc:"IE: 8",version:8};case"IE9":return{browser:"Microsoft IE",desc:"IE: 9",version:9};case"IE10":return{browser:"Microsoft IE",version:10,desc:"IE: 10"};case"IE11":return{browser:"Microsoft IE",desc:"IE: 11",version:11};default:return{browser:"Microsoft IE",desc:"Undefined",version:11}}return"Chrome"!==o||null==(e=/(chrome)\/([\w.]+)/.exec(t))||window.attachEvent?"Opera"!==o||null==(e=/(opera).+version\/([\w.]+)/.exec(t))||window.attachEvent?"Edge"!==o||null==(e=/(chrome)\/([\w.]+)/.exec(t))||window.attachEvent?"Firefox"!==o||null==(e=/(firefox)\/([\w.]+)/.exec(t))||window.attachEvent?"Safari"!==o||null==(e=/version\/([\w.]+).*(safari)/.exec(t))||window.attachEvent||window.chrome||window.opera?{browser:"",version:null}:{browser:"Safari",desc:"Safari/"+e[1]||"0",version:e[1]}:{browser:"\u706b\u72d0",desc:"Firefox/"+e[2]||"0",version:e[2]}:{browser:"Microsoft Edge",desc:"Chrome/"+e[2]||"0",version:e[2]}:{browser:"Opera",desc:"Chrome/"+e[2]||"0",version:e[2]}:null==(r=/(opr)\/(.+)/.exec(t))?{browser:"\u8c37\u6b4c",desc:"Chrome/"+e[2]||"0",version:e[2]}:{browser:"Opera",desc:"opr/"+r[2]||"0",version:r[2]}}},(i=(r={exports:{}}).exports).BrowserMatch=s,i.checkBrowser=function(r){var t=document.createElement("div");function e(){var e;r&&"function"==typeof r?r():null===document.getElementById("updateBrowseBoxVersion")&&(void 0===(e=document.getElementsByTagName("body")[0])?setTimeout(f,10):e.insertBefore(t,e.firstChild))}t.innerHTML='<style>.btn{display:inline-block;padding:6px 12px;margin-bottom:0;font-size:14px;font-weight:400;line-height:1.42857143;text-align:center;white-space:nowrap;vertical-align:middle;-ms-touch-action:manipulation;touch-action:manipulation;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;border:1px solid transparent;border-radius:4px;} a.btn {display: inline-block;background-color: #0885f2;color: #ffffff;line-height:16px;border: 1px solid #0885f2;outline: none;cursor: pointer;border-radius: 2px;cursor:pointer;} a.btn:hover {color:#fff;}</style> <div  id = "updateBrowseBoxVersion" style = "position: fixed;top: 0;left:0px;width: 100%;color: red;border-bottom: 1px solid #b1b4b9;padding-left: 10px;" class="update-browse-tips" > \u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528\u90e8\u5206\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u3002\u63a8\u8350\u4f7f\u7528\u8c37\u6b4c\uff0c\u706b\u72d0\u6d4f\u89c8\u5668<a class="btn btn-update" target="_blank" href="http://browsehappy.osfipin.com/">\u7acb\u5373\u5347\u7ea7</a></div > ';var o=s.getBrowser(),n=parseFloat(o.version);return"WebSocket"in window&&2===window.WebSocket.CLOSING&&!(1<=window.navigator.userAgent.indexOf("MSIE"))&&!("\u8c37\u6b4c"===o.browser&&n<60)||(e(),!1)},i.getNetworkType=function(){var e=navigator.userAgent;(e.match(/NetType\/\w+/)?e.match(/NetType\/\w+/)[0]:"NetType/other").toLowerCase().replace("nettype/","");var r="";switch(r){case"wifi":r="wifi";break;case"4g":r="4g";break;case"3g":case"3gnet":r="3g";break;case"2g":r="2g";break;default:r="other"}return r},Object.defineProperty(i,"__esModule",{value:!0}),r.exports);(o=a)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")&&o.default;var d=a.BrowserMatch,p=a.getNetworkType,c=(u.prototype.on=function(e,r){return this.handlers[e]=this.handlers[e]||[],this.handlers[e].push(r),this.handlers[e]},u.prototype.off=function(e){this.handlers[e]&&delete this.handlers[e]},u.prototype.trigger=function(e,r){var t=this,o=r||[],n=this.handlers[e];return!n||n.every(function(e){return!1!==e.apply(t,o)})},u);function u(){this.handlers={}}var l,g,w,h=(t(g=m,w=l=c),g.prototype=null===w?Object.create(w):(v.prototype=w.prototype,new v),m.prototype.reportByGet=function(e){this.sendData("get",e)},m.prototype.reportByPost=function(e){this.sendData("post",e)},m.prototype.sendData=function(e,r){this.catchData(e,r)&&this.delayReport()},m.prototype.delayReport=function(e){var r,t=this;this.trigger("beforeReport")&&(r=this.config.mergeReport?this.config.delay:0,setTimeout(function(){t.trigger("beforeSend")&&t.report(e)},r))},m.prototype.catchData=function(e,r){return!(Math.random()>=this.config.random)&&(this.queue[e].push(r),this.queue[e])},m.prototype.postRequest=function(){var o=this;return new Promise(function(e){var r,t;0===o.queue.post.length?e():(r=o._postParames("post"),(t=new XMLHttpRequest).onreadystatechange=function(){4==t.readyState&&200==t.status&&e(r)},t.open("POST",o.postUrl,!0),t.setRequestHeader("Content-Type","application/json"),t.send(JSON.stringify(r)))})},m.prototype._getParames=function(e){var r=this.queue[e],t=this.config.mergeReport,o=t?r:[r.shift()];return t&&(this.queue[e]=[]),o.map(n).join("|")},m.prototype._postParames=function(e){var r=this.queue[e],t=this.config.mergeReport,o=t?r:[r.shift()];return t&&(this.queue[e]=[]),o.map(function(e){return e})[0]},m.prototype.report=function(r){var t=this;Promise.all([this.postRequest()]).then(function(e){t.trigger("afterReport"),r&&r.call(t,e)})},m.prototype.watch=function(s,a){void 0===s&&(s=""),void 0===a&&(a="");var c=this;window.onerror=function(e,r,t,o,n){var i;n&&(i={errorType:"onerror",errorFilename:r,errorLineNo:t,errorColNo:o,errorStack:n.stack,errorLevel:"1",path:window.location.href,errorMessage:n.message,errorTimeStamp:(new Date).getTime(),network:p(),userAgent:navigator.userAgent,device:navigator.appName+";"+navigator.appVersion,system:JSON.stringify({platform:navigator.platform,OS:d.OS,browser:d.browser,version:d.version}),environment:a,appSystem:s},c.reportByPost(i,function(e){console.log(e)}))},window.addEventListener("unhandledrejection",function(e){e.preventDefault(),console.log("\u6355\u83b7\u5230\u5f02\u5e38\uff1a",e)}),window.addEventListener("error",function(r){var e,t=event.target;t&&t.baseURI&&r&&r.error&&(e={errorType:"error",errorFilename:r.filename,errorLineNo:r.lineno,errorColNo:r.colno,errorStack:r.error.stack,errorLevel:"1",path:window.location.href,errorMessage:r.message+";;;"+t.outerHTM+";;;"+t.baseURI,errorTimeStamp:(new Date).getTime(),network:p(),userAgent:navigator.userAgent,device:navigator.appName+";"+navigator.appVersion,system:JSON.stringify({platform:navigator.platform,OS:d.OS,browser:d.browser,version:d.version}),environment:a,appSystem:s},c.reportByPost(e,function(e){console.log("\u6355\u83b7\u5230\u5f02\u5e38\u8d44\u6e90\u8bf7\u6c42\uff1a",r+e)}))},!0),window.addEventListener("load",function(){sessionStorage.setItem("good_exit","pending"),setInterval(function(){sessionStorage.setItem("time_before_crash",(new Date).toString())},1e3)}),window.addEventListener("beforeunload",function(){sessionStorage.setItem("good_exit","true")}),sessionStorage.getItem("good_exit")&&sessionStorage.getItem("good_exit"),this.isRegisterMonitoring=!0},m);function v(){this.constructor=g}function m(e){var r=l.call(this)||this;return r.config=function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t]);return e}({dataKey:"",mergeReport:!0,delay:1e3,url:"",getPath:"",postPath:"",random:1},e),r.queue={get:[],post:[]},r.getUrl=r.config.url+r.config.getPath,r.postUrl=r.config.url+r.config.postPath,r.isRegisterMonitoring=!1,d.init(),r}return e.Report=h,e}({});